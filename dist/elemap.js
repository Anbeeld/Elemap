var Elemap;(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.t(i,s)&&!t.t(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},t:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{t.d(e,{default:()=>Lt});class i{constructor(){}get i(){return M.map.h(this.o.i)}get u(){return{l:`.elemap-${this.o.i.map}`}}}var s,r,n;function h(t){return void 0!==t.x&&void 0!==t.y}function o(t){return void 0!==t.p&&void 0!==t.r?t.p:t.y}function u(t,e){return parseFloat(t.toFixed(e))}!function(t){t.m="rectangle",t.$="hexagon"}(s||(s={})),function(t){t.v="pointy",t._="flat"}(r||(r={})),function(t){t.S="odd",t.C="even"}(n||(n={}));const l=2/Math.sqrt(3);function d(t,e,i=0,s={top:0,left:0}){const n=Math.sin(30*Math.PI/180);const h=Math.cos(30*Math.PI/180),o=v(e.T),l=v(e.q)/(o*h*2),d=v(e.I)/(2*o);let a=0,c=0,f=u(o*h*l,2),p=u(o*n*d,2),m=u(f-i*h*l,2),g=u(i*n*d,2),x=u(f+i*h*l,2),$=u(2*f,2),y=u(p+o,2),w=u($-i*h*l,2),_=u(p-i*n*d,2),b=u(p+i*d,2),S=u(y+p,2),C=u(y-i*d,2),z=u(y+i*n*d,2),T=u(S-i*n*d,2),q=u(i*h*l,2);if(t===r.v)return a=u(a+s.left,2),f=u(f+s.left,2),m=u(m+s.left,2),x=u(x+s.left,2),$=u($+s.left,2),w=u(w+s.left,2),q=u(q+s.left,2),c=u(c+s.top,2),p=u(p+s.top,2),g=u(g+s.top,2),_=u(_+s.top,2),b=u(b+s.top,2),y=u(y+s.top,2),C=u(C+s.top,2),z=u(z+s.top,2),S=u(S+s.top,2),T=u(T+s.top,2),`M ${m},${g}Q ${f},${c} ${x},${g} L ${w},${_}Q ${$},${p} ${$},${b} L ${$},${C}Q ${$},${y} ${w},${z} L ${x},${T}Q ${f},${S} ${m},${T} L ${q},${z}Q ${a},${y} ${a},${C} L ${a},${b}Q ${a},${p} ${q},${_} Z`;if(t===r._)return a=u(a+s.top,2),f=u(f+s.top,2),m=u(m+s.top,2),x=u(x+s.top,2),$=u($+s.top,2),w=u(w+s.top,2),q=u(q+s.top,2),c=u(c+s.left,2),p=u(p+s.left,2),g=u(g+s.left,2),_=u(_+s.left,2),b=u(b+s.left,2),y=u(y+s.left,2),C=u(C+s.left,2),z=u(z+s.left,2),S=u(S+s.left,2),T=u(T+s.left,2),`M ${g},${m}Q ${c},${f} ${g},${x} L ${_},${w}Q ${p},${$} ${b},${$} L ${C},${$}Q ${y},${$} ${z},${w} L ${T},${x}Q ${S},${f} ${T},${m} L ${z},${q}Q ${y},${a} ${C},${a} L ${b},${a}Q ${p},${a} ${_},${q} Z`;throw new Error("Invalid hexagon type")}function a(t,e=0,i={top:0,left:0}){let s=0,r=0,n=s+e,h=r+e,o=v(t.width),l=o-e,d=v(t.height),a=d-e;return s=u(s+i.left,2),o=u(o+i.left,2),l=u(l+i.left,2),n=u(n+i.left,2),r=u(r+i.top,2),d=u(d+i.top,2),h=u(h+i.top,2),a=u(a+i.top,2),`M ${s},${h}A ${e},${e} 0 0 1 ${n},${r} L ${l},${r}A ${e},${e} 0 0 1 ${o},${h} L ${o},${a}A ${e},${e} 0 0 1 ${l},${d} L ${n},${d}A ${e},${e} 0 0 1 ${s},${a} Z`}function c(t,e,i){let s={r:0,p:0};return e===r.v?(s.r=t.y,i===n.S?s.p=t.x-(t.y-(1&t.y))/2:s.p=t.x-(t.y+(1&t.y))/2):(s.p=t.x,i===n.S?s.r=t.y-(t.x-(1&t.x))/2:s.r=t.y-(t.x+(1&t.x))/2),s}function f(t,e,i){let s={x:0,y:0};return e===r.v?(s.y=t.r,i===n.S?s.x=t.p+(t.r-(1&t.r))/2:s.x=t.p+(t.r+(1&t.r))/2):(s.x=t.p,i===n.S?s.y=t.r+(t.p-(1&t.p))/2:s.y=t.r+(t.p+(1&t.p))/2),s}function p(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t,...e){if(!e.length)return t;const i=e.shift();if(p(t)&&p(i))for(const e in i)p(t[e])&&p(i[e])?m(t[e],i[e]):Object.assign(t,{[e]:i[e]});return m(t,...e)}class g{*[Symbol.iterator](){for(const t of this.keys)yield[t,this[t]]}get keys(){let t=[];for(const e of Object.keys(this)){let i;if("string"==typeof e){if(!y(e))continue;i=Number(e)}else{if("number"!=typeof e)continue;i=e}t.push(i)}return t.sort(((t,e)=>t-e)),t}get values(){let t=[];for(const e of this.keys)t.push(this[e]);return t}get length(){return this.keys.length}}class x extends g{}function $(t){let e=new g;if(p(t))for(const i in t)e[Number(i)]=t[i];return e}function y(t){return"string"==typeof t&&!isNaN(Number(t))}function v(t){return t.endsWith("px")?Number(t.slice(0,-2)):Number(t)}function w(t){if("number"==typeof t)return t;if(y(t))return Number(t);if(t.endsWith("px")&&y(t.slice(0,-2)))return Number(t.slice(0,-2));throw new Error(`Invalid calc value: ${t}`)}function _(t){return"number"==typeof t||"string"==typeof t&&(!!y(t)||!(!t.endsWith("px")||!y(t.slice(0,-2))))}function b(t){return t.every(_)}const S=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e+=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" + ")})`},C=function(...t){if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e-=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" - ")})`},z=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e*=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" * ")})`},T=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e/=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" / ")})`},q=(t,e)=>`${u(w(t),e)}px`;class E extends i{set o(t){this.P=t}get o(){return this.P}get i(){return M.grid.h(this.o.i)}get map(){return M.style.map.grid(this.o.i)}set B(t){this.A=t}get B(){return this.A}set N(t){this.k=t}get N(){return this.k}set O(t){this.L=t}get O(){return this.L}constructor(t,e,i){super(),this.o=new Q(t,e,M.id()),this.M(i.O),this.B=i.grid}get u(){let t=`.elemap-${this.o.i.map}`,e=t+"-grid";return{l:t,frame:e+"-frame",grid:e,R:e+">div",O:e+">div>div",j:e+"-outer",G:e+"-inner",F:e+"-outer>div",H:e+"-inner>div",Y:e+"-outer>div>div",X:e+"-inner>div>div",Z:e+"-contour",D:t+"-mannequin"}}get spacing(){return z(this.O.N.inner.marginRight,2)}get J(){return this.u.frame+"{display:block;position:absolute;z-index:50;}"+this.u.D+"{display:none;}"+this.u.grid+"{overflow:hidden;}"+this.u.R+"{position:absolute;left:0;right:auto;bottom:auto;pointer-events:none;}"+this.u.O+"{pointer-events:auto;float:left;}"+this.u.j+"{position:absolute;z-index:100;}"+this.u.F+"{z-index:110;}"+this.u.Y+"{position:absolute;z-index:120;}"+this.u.Y+":before{z-index:130;}"+this.u.Y+":after{z-index:140;}"+this.u.G+"{position:relative;z-index:150;}"+this.u.H+"{z-index:160;}"+this.u.X+"{position:absolute;z-index:170;}"+this.u.X+":after{z-index:190;}"+this.u.X+">*{position:relative;z-index:200;}"+this.u.Z+"{display:block;position:absolute;z-index:210;pointer-events:none;}"+this.u.Z+">div{display:block;position:absolute;z-index:220;}"}get K(){return this.u.frame+"{"+this.B.frame+"}"+this.u.Z+">div{"+this.B.Z+"}"}get U(){let t=`{top: ${this.map.N.map.paddingTop};right: ${this.map.N.map.paddingRight};bottom: ${this.map.N.map.paddingBottom};left: ${this.map.N.map.paddingLeft};}`;return this.u.grid+"{"+`margin:${T(this.spacing,2)};`+`width: ${this.V.width};`+`height:${this.V.height};}`+this.u.frame+t+this.u.j+t+this.u.Z+t+this.u.Z+"{"+`margin:${T(this.spacing,2)};}`+this.u.R+"{"+`height:${this.O.size.W.height};`+`width: ${this.tt.width};}`+this.u.Y+"{"+`width:${this.O.size.W.width};`+`height:${this.O.size.W.height};}`+this.u.Z+">div{display:none;top:0;left:0;"+`width:${this.O.size.et.width};`+`height:${this.O.size.et.height};}`+this.u.frame+"{"+`clip-path: path('${this.it}');}`+this.st+this.rt+this.nt}get st(){let t="",e=this.i.ht;for(let i=e.y.min;i<=e.y.max;i++)this.i.ot[i]&&(t+=this.u.R+`[data-elemap-y="${i}"]{`+`top:${z(i-e.y.min,this.O.size.W.height)};}`);return t}compute(){this.N={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.O.compute()}get tt(){return{width:z(this.O.size.W.width,this.i.size.width),height:this.O.size.W.height}}get V(){return{width:this.tt.width,height:z(this.O.size.W.height,this.i.size.height)}}lt(t){return{top:z(t.y-this.i.ht.y.min,this.O.size.W.height),left:z(t.x-this.i.ht.x.min,this.O.size.W.width)}}dt(t){let e=this.lt(t);return{top:S(e.top,T(this.spacing,2)),left:S(e.left,T(this.spacing,2))}}get rt(){let t="";for(let e of this.i.ot.values)for(let i of e.values)t+=this.u.O+i.u.data+"{"+`left:${this.lt(i.ct).left};}`;return t}get ft(){return{top:S(this.map.N.map.paddingTop,T(this.spacing,2)),left:S(this.map.N.map.paddingLeft,T(this.spacing,2))}}gt(){for(let t of this.i.ot.values)for(let e of t.values)e.xt()}}class I{constructor(t){this.map=t}}class P extends I{}class B extends P{constructor(t,e){super(t.map),this.grid=e}}class A extends B{constructor(t,e){super(t,t.grid),this.O=e}}class N extends P{constructor(t,e){super(t.map),this.content=e}}class k{constructor(t,e){this.i=t,this.map=e}}class O extends k{}class Q extends O{constructor(t,e,i){super(t,e.map),this.grid=i}}class L extends Q{constructor(t,e,i){super(t,e,i),this.O=i}}class M{static id(){return M.$t++}static add(t){M.yt.set(t.o.map,t)}static content(t){let e=M.map.h(t);if(e)return e.vt(t)}}function R(t,e){if(t&&t.hasOwnProperty(e))return t[e]}function j(t,e,i){if(t)return t[e]=i,t}function G(t,e){for(let i of e)j(t,i[0],i[1]);return t}function F(t){let e={};return j(e,"map",t.map),e}function H(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),e}function Y(t){return{map:R(t,"map"),grid:R(t,"grid")}}function X(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),j(e,"tile",t.O),e}function Z(t){return{map:R(t,"map"),grid:R(t,"grid"),O:R(t,"tile")}}function D(t){let e={};return j(e,"map",t.map),j(e,"content",t.content),e}function J(t){return{map:R(t,"map"),content:R(t,"content")}}function K(t){let e={};return t&&(t.content?e=D(t):t.O&&(e=X(t))),e}function U(t){return{W:R(t,"outer"),inner:R(t,"inner")}}function V(t){return G({},[["frame",t.frame],["contour",t.Z]])}function W(t){return{frame:R(t,"frame"),Z:R(t,"contour")}}function tt(t){return G({},[["outer",t.W],["inner",t.inner],["hover",G({},[["outer",t.wt.W],["inner",t.wt.inner]])]])}function et(t){return{W:R(t,"outer"),inner:R(t,"inner"),wt:{W:R(R(t,"hover"),"outer"),inner:R(R(t,"hover"),"inner")}}}function it(t){return{grid:W(R(t,"grid")),O:et(R(t,"tile"))}}function st(t){return{map:U(R(t,"map")),grid:W(R(t,"grid")),O:et(R(t,"tile"))}}function rt(t){return void 0!==R(t,"q")&&void 0!==R(t,"r")?{p:R(e=t,"q"),r:R(e,"r")}:function(t){return{x:R(t,"x"),y:R(t,"y")}}(t);var e}function nt(t){return void 0!==t.p&&void 0!==t.r?function(t){let e={};return j(e,"q",t.p),j(e,"r",t.r),e}(t):function(t){let e={};return j(e,"x",t.x),j(e,"y",t.y),e}(t)}M.$t=0,M.yt=new Map,M.map={h:t=>M.yt.get(t.map),grid:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e}},M.grid={h:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e.grid},_t:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e.grid},bt:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e.grid}},M.O={h:t=>{let e=M.grid.h(t);if(e)return e.St(t)}},M.style={map:{grid:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e.style}},grid:t=>{let e=M.map.h(t);if(e&&e instanceof xt)return e.style.grid},O:t=>{let e=M.map.h(t);if(e&&e instanceof xt&&e.style.grid&&e.style.grid instanceof E)return e.style.grid.O}};const ht={W:"padding:50px;background-color:#f5df8d;",inner:""};function ot(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||"")}}const ut={frame:"background-color:#222222;",Z:"border: 2px solid transparent;background-color:#f5f5f5;"};function lt(t,e){return{frame:(e&&e.frame?e.frame:"")+(t.frame||""),Z:(e&&e.Z?e.Z:"")+(t.Z||"")}}const dt={W:"background-color:#222222;",inner:"width:100px;height:100px;border-radius:6px;background-color:#b2e090;margin:2px;",wt:{W:"background-color:#f5f5f5;",inner:""}};function at(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||""),wt:{W:(e&&e.wt&&e.wt.W?e.wt.W:"")+(t.wt&&t.wt.W?t.wt.W:""),inner:(e&&e.wt&&e.wt.inner?e.wt.inner:"")+(t.wt&&t.wt.inner?t.wt.inner:"")}}}class ct{set o(t){this.P=t}get o(){return this.P}get grid(){return M.grid.h(this.o)}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:M.style.O(this.o)}get B(){return this.style.B}set elements(t){this.zt=t}get elements(){return this.zt}set coords(t){this.Tt=t}get coords(){return this.Tt}set extensions(t){this.qt=t}get extensions(){return this.qt}constructor(t){this.Et=!1,this.qt={},"number"==typeof t.o.O?this.o=new A(t.o,t.o.O):this.o=new A(t.o,M.id()),this.coords=t.coords,t.B&&"mannequin"!==t.B&&this.It(t.B)}static Pt(t,e){let i=new t(function(t){return{o:Z(R(t,"ids")),coords:rt(R(t,"coords")),B:!!R(t,"decls")&&et(R(t,"decls")),extensions:R(t,"extensions")}}(e));return i.extend(e),i}extend(t){m(this.extensions,t)}Bt(){return this.At(this.Nt())}Nt(t={}){return G(t,[["ids",X(this.o)],["coords",nt(this.coords)],["decls",void 0!==this.Ct&&tt(this.B)]]),t}At(t={}){return G(t,[["extensions",this.extensions]]),t}It(t,e=!1){void 0===this.Ct||e?this.style=this.kt(at(t)):this.style=this.kt(at(t,this.B)),this.Et&&this.Ot()}Qt(){this.elements||(this.elements={inner:document.createElement("div")})}Ot(){if(this.style.D&&this.style.i===this)this.Lt();else{let t=this.grid.elements.Mt[o(this.ct)],e=this.grid.elements.Rt[o(this.ct)];this.Qt(),this.jt(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W)),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}this.Et=!0}Lt(){let t=this.grid.elements.D.F,e=this.grid.elements.D.H;this.elements||(this.elements={inner:document.createElement("div"),W:document.createElement("div")}),this.elements.W.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.classList.add("elemap-"+this.o.map+"-mannequin"),t.contains(this.elements.W)||t.appendChild(this.elements.W),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}xt(){if(void 0!==this.Ct&&!this.style.D){if(!this.elements.style){let t=document.head.getElementsByTagName("style");for(let e of t)e.classList.contains("elemap-"+this.o.map+"-css-tile-"+this.o.O)&&(this.elements.style=e);this.elements.style||(this.elements.style=document.createElement("style"),this.elements.style.classList.add("elemap-"+this.o.map+"-css-tile-"+this.o.O),document.head.appendChild(this.elements.style))}if(!this.elements.W&&(this.B.W.length||this.B.wt.W.length)){this.elements.W=document.createElement("div");let t=this.grid.elements.Mt[o(this.ct)];this.jt(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W))}}this.elements.style&&(this.elements.style.innerHTML=this.style.J+this.style.K+this.style.U)}wt(){let t=M.grid.h(this.o);t&&t.Gt(this.Ft)}Ht(){let t=M.grid.h(this.o);t&&t.Gt(!1)}get Ft(){let t=M.grid.h(this.o);if(t){let e=this.elements.inner,i={x:0,y:0};for(;e;)if(i.x+=e.offsetLeft,i.y+=e.offsetTop,e=e.parentElement,e===t.elements.inner)return{x:i.x-v(t.style.spacing),y:i.y-v(t.style.spacing)}}return{x:0,y:0}}}class ft{set o(t){this.P=t}get o(){return this.P}get map(){return M.map.h(this.o)}set Yt(t){this.Xt=t}get Yt(){return this.Xt}set location(t){this.Zt=t}get location(){return this.Zt}get host(){return this.Zt.content?M.content(this.Zt):this.Zt.O?M.O.h(this.Zt):void 0}set offset(t){this.Dt=t}get offset(){return this.Dt}set elements(t){this.zt=t}get elements(){return this.zt}set extensions(t){this.qt=t}get extensions(){return this.qt}constructor(t){if(this.Zt=void 0,this.qt={},"number"==typeof t.o.content?this.o=new N(t.o,t.o.content):this.o=new N(t.o,M.id()),"string"==typeof t.Yt){let e=document.createElement("div");e.innerHTML=t.Yt,this.elements={Yt:e.children[0]}}else this.elements={Yt:t.Yt};this.location=t.location,this.offset=t.offset}static Jt(t){let e=new ft(function(t){return{o:J(R(t,"ids")),Yt:R(t,"figure"),location:(e=R(t,"location"),e?R(e,"content")?J(e):R(e,"tile")?Z(e):void 0:void 0),offset:R(t,"offset"),extensions:R(t,"extensions")};var e}(t));return e.extend(t),e}extend(t){m(this.extensions,t)}Kt(){return this.At(this.Nt())}Nt(t={}){return G(t,[["ids",D(this.o)],["figure",this.elements.Yt.outerHTML],["location",this.location?K(this.location):void 0],["offset",this.offset]]),t}At(t={}){return G(t,[["extensions",this.extensions]]),t}wt(){this.host&&"function"==typeof this.host.wt&&this.host.wt()}Ht(){this.host&&"function"==typeof this.host.Ht&&this.host.Ht()}Qt(){this.elements.container||(this.elements.container=document.createElement("div"))}Ot(){if(this.Qt(),this.host&&this.host instanceof ct){let t=this.host.style.grid.ft,e=this.host.style.grid.dt(this.host.ct),i=this.host.style.size.inner;this.elements.container.style.top=S(t.top,e.top,this.offset.top,T(i.height,2)),this.elements.container.style.left=S(t.left,e.left,this.offset.top,T(i.width,2))}this.elements.container.contains(this.elements.Yt)||this.elements.container.appendChild(this.elements.Yt),this.map.elements.content.contains(this.elements.container)||this.map.elements.content.appendChild(this.elements.container)}}class pt{constructor(t){this.Ut=t,this.Vt(),this.Wt()}extend(t){return this.te(t)}Vt(){j(this,"extend",(t=>this.te(t)))}te(t){return this.Ut.extend(t)}set extensions(t){}get extensions(){return this.ee()}Wt(){j(this,"extensions",{set:t=>{},get:()=>this.ee()})}ee(){return this.Ut.extensions}}class mt{constructor(t){this.Ut=t,this.ie(),this.se(),this.Wt(),this.Vt(),this.re()}set coords(t){}get coords(){return this.ne()}ie(){j(this,"coords",{set:t=>{},get:()=>this.ne()})}ne(){return nt(this.Ut.coords)}Kt(){return this.he()}se(){j(this,"export",(()=>this.he()))}he(){return this.Ut.Kt()}set extensions(t){}get extensions(){return this.ee()}Wt(){j(this,"extensions",{set:t=>{},get:()=>this.ee()})}ee(){return this.Ut.extensions}extend(t){return this.te(t)}Vt(){j(this,"extend",(t=>this.te(t)))}te(t){return this.Ut.extend(t)}It(t,e=!1){this.oe(t,e)}re(){j(this,"updateStyle",((t,e=!1)=>this.oe(t,e)))}oe(t,e=!1){this.Ut.It(et(t),e)}}class gt{set o(t){this.P=t}get o(){return this.P}set elements(t){this.zt=t}get elements(){return this.zt}set style(t){this.Ct=t}get style(){return this.Ct}get ue(){return{l:`elemap-${this.o.map}`,container:`elemap-${this.o.map}-container`,map:`elemap-${this.o.map}-map`}}set extensions(t){this.qt=t}get extensions(){return this.qt}set le(t){this.de=t}get le(){return this.de}constructor(t){this.qt={},this.de=[],t.o&&"number"==typeof t.o.map?this.o=new P(t.o.map):this.o=new P(M.id()),M.add(this),t.le&&this.ae(t.le)}Bt(){return this.At(this.Nt())}Nt(t={}){return G(t,[["type",this.ce()],["ids",F(this.o)],["contents",this.le.map((t=>t.Kt()))]]),t}At(t={}){return G(t,[["extensions",this.extensions]]),t}ae(t){for(let e of t)this.le.push(ft.Jt(e))}Qt(){if(this.elements&&this.elements.map)return this.elements;{let t=document.createElement("div");t.classList.add(`elemap-${this.o.map}-map`);let e=document.createElement("div");return e.classList.add(`elemap-${this.o.map}-content`),{map:t,content:e}}}fe(t){if(t&&this.elements.container!==t&&(this.elements.container=t,this.elements.container.innerHTML="",this.elements.container.classList.add("elemap-"+this.o.map+"-container")),!this.elements.container)throw new Error("No container found.");for(let t of document.getElementsByClassName("elemap-"+this.o.map+"-container"))t!==this.elements.container&&t.classList.remove("elemap-"+this.o.map+"-container");this.elements.container.appendChild(this.elements.map),this.elements.container.appendChild(this.elements.content)}Ot(t){this.elements=this.Qt(),this.fe(t),this.style.Ot();for(let t of this.le)t.Ot()}vt(t){for(let e of this.le)if(e.o.content===t.content)return e}pe(t){for(let e of this.le)if(e.elements.Yt===t)return e}me(t){let e=function(t){return{Yt:R(t,"figure"),location:R(t,"location"),offset:R(t,"offset")}}(t);e.location instanceof mt?e.location=this.grid.ge(e.location.coords).o:e.location=void 0;let i=new ft(Object.assign(e,{o:this.o,offset:t.offset||{top:"0",right:"0"}}));return this.le.push(i),new pt(i)}}class xt extends gt{set style(t){this.Ct=t}get style(){return this.Ct}get K(){return{map:this.style.B,grid:this.style.grid.B,O:this.style.grid.O.B}}constructor(t,e){super(t),t.grid.o&&"number"==typeof t.grid.o.grid?this.grid=e.Jt(t.grid):this.grid=new e(Object.assign(t.grid,{o:this.o})),this.xe(t.K),t.grid.ot&&this.grid.$e(function(t){let e=new x;if(p(t))for(const i in t)e[Number(i)]=$(t[i]);return e}(t.grid.ot))}static Pt(t,e){let i=new t(e);return i.extend(e),i}extend(t){m(this.extensions,t)}Nt(t={}){var e,i;return G(t,[["type",this.ce()],["ids",F(this.o)],["grid",this.grid.Kt()],["schema",(e=this.K,G({},[["map",(i=e.map,G({},[["outer",i.W],["inner",i.inner]]))],["grid",V(e.grid)],["tile",tt(e.O)]]))],["contents",this.le.map((t=>t.Kt()))]]),t}At(t={}){return G(t,[["extensions",this.extensions]]),t}Ot(t){this.elements=this.Qt(),this.fe(t),this.grid.Ot(this.elements.map),this.style.Ot();for(let t of this.le)t.Ot()}}class $t{set o(t){this.P=t}get o(){return this.P}get size(){return{width:this.ht.x.max-this.ht.x.min+1,height:this.ht.y.max-this.ht.y.min+1}}get ht(){let t,e,i,s;for(let r of this.ot.keys){(void 0===t||r<t)&&(t=r),(void 0===e||r>e)&&(e=r);for(let t of this.ot[r].keys)(void 0===i||t<i)&&(i=t),(void 0===s||t>s)&&(s=t)}return{x:{min:i||0,max:s||0},y:{min:t||0,max:e||0}}}St(t){if(this.D.o.O===t.O)return this.D;for(let e in this.ot)for(let i in this.ot[e])if(this.ot[e][i].o.O===t.O)return this.ot[e][i]}get style(){return M.map.grid(this.o).style.grid}get K(){return{grid:this.style.B,O:this.style.O.B}}get ue(){let t=`elemap-${this.o.map}`;return{l:t,frame:t+"-frame",grid:t+"-grid",j:t+"-outer",G:t+"-inner",Z:t+"-contour"}}get u(){return this.style.u}set orientation(t){this.ye=t}get orientation(){return this.ye}set offset(t){this.Dt=t}get offset(){return this.Dt}set elements(t){this.zt=t}get elements(){return this.zt}set extensions(t){this.qt=t}get extensions(){return this.qt}constructor(t){this.ot=new x,this.qt={},"number"==typeof t.o.grid?this.o=new B(t.o,t.o.grid):this.o=new B(t.o,M.id()),this.orientation=t.orientation,this.offset=t.offset}static Pt(t,e){let i=new t(e);return i.extend(e),i}extend(t){m(this.extensions,t)}Bt(){return this.At(this.Nt())}Nt(t={}){let e=new g;for(let[t,i]of this.ot){e[t]=new g;for(let[s,r]of i)e[t][s]=r.Kt()}var i;return G(t,[["ids",H(this.o)],["orientation",this.orientation],["offset",this.offset],["schema",(i=this.K,G({},[["grid",V(i.grid)],["tile",tt(i.O)]]))],["tiles",e]]),t}At(t={}){return G(t,[["extensions",this.extensions]]),t}$e(t){for(let[e,i]of t)for(let[t,s]of i)this.ot[e]||(this.ot[e]=new g),this.ot[e][t]=this.ve(s)}Qt(){this.elements||(this.elements={frame:document.createElement("div"),W:document.createElement("div"),inner:document.createElement("div"),Mt:new g,Rt:new g,Z:document.createElement("div"),ut:document.createElement("div"),D:{F:document.createElement("div"),Y:document.createElement("div"),H:document.createElement("div"),X:document.createElement("div")}},this.elements.frame.classList.add("elemap-"+this.o.map+"-grid-frame"),this.elements.W.classList.add("elemap-"+this.o.map+"-grid"),this.elements.W.classList.add("elemap-"+this.o.map+"-grid-outer"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid-inner"),this.elements.Z.classList.add("elemap-"+this.o.map+"-grid-contour"),this.elements.Z.appendChild(this.elements.ut),this.elements.D.F.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.W.appendChild(this.elements.D.F),this.elements.D.H.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.appendChild(this.elements.D.H),this.style.O.i.Ot())}Ot(t){this.Qt(),t.innerHTML="";for(let t in this.elements.Mt)for(let e of this.elements.Mt[t].children)this.we(e)||this.elements.Mt[t].removeChild(e);for(let t in this.elements.Rt)for(let e of this.elements.Rt[t].children)this.we(e)||this.elements.Rt[t].removeChild(e);for(let[t,e]of this.ot){void 0===this.elements.Mt[t]&&(this.elements.Mt[t]=document.createElement("div"),j(this.elements.Mt[t].dataset,"elemapY",t.toString()),this.elements.W.appendChild(this.elements.Mt[t])),void 0===this.elements.Rt[t]&&(this.elements.Rt[t]=document.createElement("div"),j(this.elements.Rt[t].dataset,"elemapY",t.toString()),this.elements.inner.appendChild(this.elements.Rt[t]));for(let t of e.values)t.Ot()}t.appendChild(this.elements.frame),t.appendChild(this.elements.W),t.appendChild(this.elements.inner),t.appendChild(this.elements.Z),this.elements.inner.addEventListener("mouseover",(t=>{let e=t.target.closest(this.u.X);e&&this.we(e).wt()})),this.elements.inner.addEventListener("mouseout",(t=>{let e=t.target.closest(this.u.X);e&&this.we(e).Ht()}))}Gt(t){!1===t?this.elements.ut.removeAttribute("style"):(this.elements.ut.style.display="block",this.elements.ut.style.transform=`translate(${t.x}px, ${t.y}px)`)}}class yt extends i{set o(t){this.P=t}get o(){return this.P}get i(){return M.O.h(this.o.i)}get grid(){return M.style.grid(this.o.i)}get spacing(){return this.grid.spacing}set N(t){this.k=t}get N(){return this.k||this.compute(),this.k}get u(){return Object.assign(Object.assign({},this.grid.u),{data:this.D?"":this.i.u.data})}set B(t){this.A=t}get B(){return this.A}constructor(t,e,i,s=!1){super(),this.o=new L(t,e,M.id()),this.D=s,this.B=i}get size(){let t={width:this.N.inner.width,height:this.N.inner.height};return{et:{width:S(t.width,z(this.spacing,2)),height:S(t.height,z(this.spacing,2))},W:{width:S(t.width,this.spacing),height:S(t.height,this.spacing)},inner:t}}get J(){return""}get K(){let t="";return this.B.W.length&&(t+=this.u.Y+this.u.data+"{"+this.B.W+"}"),this.B.inner.length&&(t+=this.u.X+this.u.data+"{"+this.B.inner+"}"),this.B.wt.W.length&&(t+=this.u.Y+this.u.data+":hover{"+this.B.wt.W+"}"),this.B.wt.inner.length&&(t+=this.u.X+this.u.data+":hover{"+this.B.wt.inner+"}"),t}get U(){return""}compute(){this.N={inner:getComputedStyle(this.i.elements.inner)}}get _e(){return this.grid.lt(this.i.ct)}get be(){return this.grid.dt(this.i.ct)}}class vt extends yt{}class wt extends ct{constructor(t){super(t)}get ct(){return this.coords}static Jt(t){return this.Pt(wt,t)}Kt(){return this.Bt()}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:M.style.O(this.o)}kt(t){return new vt(this.o,this.grid.style.o,t)}jt(){this.elements.W&&(j(this.elements.W.dataset,"elemapX",this.coords.x.toString()),j(this.elements.W.dataset,"elemapY",this.coords.y.toString())),j(this.elements.inner.dataset,"elemapX",this.coords.x.toString()),j(this.elements.inner.dataset,"elemapY",this.coords.y.toString())}get u(){return{data:`[data-elemap-x="${this.coords.x}"][data-elemap-y="${this.coords.y}"]`}}}class _t extends $t{constructor(t){super(t)}static Jt(t){return this.Pt(_t,t)}Kt(){return this.Bt()}Se(t){return new wt(t)}ve(t){return wt.Jt(t)}Ce(t){return t}ze(t,e){return Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.ot[t.y]||(this.ot[t.y]=new g),!(!e&&this.ot[t.y][t.x])&&(this.ot[t.y][t.x]=this.Se({o:this.o,coords:this.Ce(t),B:!1}),t)}Te(t,e,i){let s=[];Array.isArray(e)&&(e={x:e[0],y:e[1]});for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.ze({x:r,y:n},i));return s}ge(t){if(Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.ot[t.y]&&this.ot[t.y][t.x])return this.ot[t.y][t.x]}we(t){if(t.hasAttribute("data-elemap-x")&&t.hasAttribute("data-elemap-y")){let e=this.ge({x:Number(t.getAttribute("data-elemap-x")),y:Number(t.getAttribute("data-elemap-y"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}}class bt extends i{set o(t){this.P=t}get o(){return this.P}set B(t){this.A=t}get B(){return this.A}set elements(t){this.zt=t}get elements(){return this.zt}set N(t){this.k=t}get N(){return this.k}constructor(t,e){super(),this.o=new O(t,M.id()),this.B=e.map}Kt(){return G(this.B,[["outer",this.B.W],["inner",this.B.inner]])}Qt(){let t,e,i,s=document.head.getElementsByTagName("style");for(let r of s)r.classList.contains(this.i.ue.l+"-css-core")?t=r:r.classList.contains(this.i.ue.l+"-css-schema")?e=r:r.classList.contains(this.i.ue.l+"-css-generated")&&(i=r);return t||(t=document.createElement("style"),t.classList.add(this.i.ue.l+"-css-core"),document.head.appendChild(t)),e||(e=document.createElement("style"),e.classList.add(this.i.ue.l+"-css-schema"),document.head.appendChild(e)),i||(i=document.createElement("style"),i.classList.add(this.i.ue.l+"-css-generated"),document.head.appendChild(i)),{J:t,K:e,U:i}}Ot(){this.elements=this.Qt(),this.elements.J.innerHTML=this.J,this.elements.K.innerHTML=this.K,this.i.elements.map.offsetHeight,this.compute(),this.elements.U.innerHTML=this.U}get u(){return{l:`.elemap-${this.o.i.map}`,container:`.elemap-${this.o.i.map}-container`,map:`.elemap-${this.o.i.map}-map`,content:`.elemap-${this.o.i.map}-content`}}get J(){return this.u.container+"{width:max-content;position:relative;}"+this.u.map+"{position:relative;width:max-content;z-index:10;display: flex;}"+this.u.content+"{position:absolute;z-index:500;top:0;left:0;bottom:0;right:0;pointer-events:none;}"+this.u.content+">div{width: 0px;height: 0px;position: absolute;overflow:visible}"+this.u.content+">div>*{position: absolute;transform: translate(-50%, -100%);}"}get K(){return this.u.map+"{"+this.B.W+"}"+this.u.map+">*{"+this.B.inner+"}"}compute(){this.N={map:getComputedStyle(this.i.elements.map)}}get U(){return""}}class St extends bt{set grid(t){this.qe=t}get grid(){return this.qe}get i(){return M.map.grid(this.o.i)}constructor(t,e){super(t,e),this.Ee(e)}Ot(){this.elements=this.Qt(),this.elements.J.innerHTML=this.J+this.grid.J+this.grid.O.J,this.elements.K.innerHTML=this.K+this.grid.K+this.grid.O.K,this.i.elements.map.offsetHeight,this.i.grid.elements.inner.offsetHeight,this.compute(),this.elements.U.innerHTML=this.U+this.grid.U+this.grid.O.U,this.grid.gt();let t=document.head.getElementsByTagName("style"),e=Array.from(t);for(let t of e)for(let e of t.classList)if(e.startsWith(this.i.ue.l+"-css-")){let e=!1;if(t!==this.elements.J&&t!==this.elements.K&&t!==this.elements.U||(e=!0),!e)for(let i of this.grid.i.ot.values){for(let s of i.values)if(t===s.elements.style){e=!0;break}if(e)break}e||t.remove()}}compute(){this.N={map:getComputedStyle(this.i.elements.map)},this.grid.compute()}}class Ct extends E{get i(){return M.grid._t(this.o.i)}set O(t){this.L=t}get O(){return this.L}M(t){this.i.D=new wt({o:this.i.o,coords:{x:0,y:0},B:"mannequin"}),this.O=new vt(this.i.D.o,this.o,t,!0)}get nt(){let t=u(v(this.N.ut.borderWidth),0)+"px",e={width:C(this.O.size.et.width,z(t,2)),height:C(this.O.size.et.height,z(t,2))},i=a(this.O.size.et,v(this.O.N.inner.borderRadius)),s=a(e,v(this.O.N.inner.borderRadius),{top:v(t),left:v(t)});return this.u.Z+">div{"+`clip-path:path(evenodd,'${i} ${s}');}`}get it(){let t="",e=this.i.ht;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.ot[i]||!this.i.ot[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=a(this.O.size.et,v(this.O.N.inner.borderRadius),{top:v(e.top),left:v(e.left)})}return t}}class zt extends St{Ee(t){this.grid=new Ct(this.i.grid.o,this.o,t)}}class Tt extends xt{constructor(t){super(t,_t)}static Jt(t){return this.Pt(Tt,t)}Kt(){return this.Bt()}ce(){return`${s.m}`}xe(t){this.style=new zt(this.o,t)}}class qt extends yt{}class Et extends ct{constructor(t){super(t)}get ct(){let t=f(this.coords,this.grid.orientation,this.grid.offset);return{x:t.x,y:t.y}}static Jt(t){return this.Pt(Et,t)}Kt(){return this.Bt()}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:M.style.O(this.o)}kt(t){return new qt(this.o,this.grid.style.o,t)}jt(){this.elements.W&&(j(this.elements.W.dataset,"elemapR",this.coords.r.toString()),j(this.elements.W.dataset,"elemapQ",this.coords.p.toString())),j(this.elements.inner.dataset,"elemapR",this.coords.r.toString()),j(this.elements.inner.dataset,"elemapQ",this.coords.p.toString()),this.elements.W&&(j(this.elements.W.dataset,"elemapX",this.ct.x.toString()),j(this.elements.W.dataset,"elemapY",this.ct.y.toString())),j(this.elements.inner.dataset,"elemapX",this.ct.x.toString()),j(this.elements.inner.dataset,"elemapY",this.ct.y.toString())}get u(){return{data:`[data-elemap-r="${this.coords.r}"][data-elemap-q="${this.coords.p}"]`}}}class It extends $t{constructor(t){super(t)}static Jt(t){return this.Pt(It,t)}Kt(){return this.Bt()}Se(t){return new Et(t)}ve(t){return Et.Jt(t)}Ce(t){return c(t,this.orientation,this.offset)}ge(t){Array.isArray(t)&&(t={p:t[0],r:t[1]});let e=h(t)?t:f(t,this.orientation,this.offset);if(this.ot[e.y]&&this.ot[e.y][e.x])return this.ot[e.y][e.x]}we(t){if(t.hasAttribute("data-elemap-r")&&t.hasAttribute("data-elemap-q")){let e=this.ge({p:Number(t.getAttribute("data-elemap-q")),r:Number(t.getAttribute("data-elemap-r"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}ze(t,e){Array.isArray(t)&&(t={p:t[0],r:t[1]});let i=h(t)?t:f(t,this.orientation,this.offset);return this.ot[i.y]||(this.ot[i.y]=new g),!(!e&&this.ot[i.y][i.x])&&(this.ot[i.y][i.x]=this.Se({o:this.o,coords:this.Ce(i),B:!1}),t)}Te(t,e,i){let s=[];if(Array.isArray(e)&&(e={p:e[0],r:e[1]}),h(e))for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.ze(c({x:r,y:n},this.orientation,this.offset),i));else for(let r=e.p;r<e.p+t.width;r++)for(let n=e.r;n<e.r+t.height;n++)s.push(this.ze({p:r,r:n},i));return s}Ie(t){return this.offset===n.S?t%2!=0:t%2==0}}class Pt extends E{get i(){return M.grid.bt(this.o.i)}set O(t){this.L=t}get O(){return this.L}M(t){this.i.D=new Et({o:this.i.o,coords:{p:0,r:0},B:"mannequin"}),this.O=new qt(this.i.D.o,this.o,t,!0)}get Pe(){return this.i.orientation===r.v?{et:{T:T(this.O.size.et.height,2),I:this.O.size.et.height,q:this.O.size.et.width},W:{T:T(this.O.size.W.height,2),I:this.O.size.W.height,q:this.O.size.W.width},inner:{T:T(this.O.size.inner.height,2),I:this.O.size.inner.height,q:this.O.size.inner.width}}:{et:{T:T(this.O.size.et.width,2),I:this.O.size.et.width,q:this.O.size.et.height},W:{T:T(this.O.size.W.width,2),I:this.O.size.W.width,q:this.O.size.W.height},inner:{T:T(this.O.size.inner.width,2),I:this.O.size.inner.width,q:this.O.size.inner.height}}}compute(){this.N={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.O.compute(),this.Be(),this.O.compute()}Be(){let t,e;this.i.orientation===r.v?(e=C(this.O.size.W.height,this.O.size.inner.height),t=q(z(this.O.size.inner.width,l),0),this.map.elements.K.innerHTML+=this.u.Y+"{height:"+S(t,e)+"}"+this.u.X+"{height:"+t+"}"):(e=C(this.O.size.W.width,this.O.size.inner.width),t=q(z(this.O.size.inner.height,l),0),this.map.elements.K.innerHTML+=this.u.Y+"{width:"+S(t,e)+"}"+this.u.X+"{width:"+t+"}")}get it(){let t="",e=this.i.ht;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.ot[i]||!this.i.ot[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=d(this.i.orientation,this.Pe.et,v(this.O.N.inner.borderRadius),{top:v(e.top),left:v(e.left)})}return t}get nt(){let t=u(v(this.N.ut.borderWidth),0)+"px",e=C(this.Pe.et.I,z(t,2)),i={T:T(e,2),I:e,q:C(this.Pe.et.q,z(t,2))},s=d(this.i.orientation,this.Pe.et,v(this.O.N.inner.borderRadius)),r=d(this.i.orientation,i,v(this.O.N.inner.borderRadius),{top:v(t),left:v(t)});return this.u.X+"{"+`clip-path:path('${d(this.i.orientation,this.Pe.inner,v(this.O.N.inner.borderRadius))}');}`+this.u.Y+"{"+`clip-path:path('${d(this.i.orientation,this.Pe.W,0)}');}`+this.u.Z+">div{"+`clip-path:path(evenodd,'${s} ${r}');}`+this.Ae()}get Ne(){return this.i.orientation===r.v?{vertical:T(this.O.size.W.height,4),ke:"0px"}:{vertical:"0px",ke:T(this.O.size.W.width,4)}}Oe(){let t=!1,e=!1;for(let i of this.i.ot.values){for(let s of i.values)this.Qe(s.ct)?t=!0:e=!0;if(t&&e)break}return t&&e}Le(){let t=this.i.ht;for(let e of this.i.ot.values)for(let i of e.values)if(!this.Qe(i.ct)){if(this.i.orientation===r.v&&i.ct.x===t.x.min)return!0;if(this.i.orientation===r._&&i.ct.y===t.y.min)return!0}return!1}Me(){let t=this.i.ht;for(let e of this.i.ot.values)for(let i of e.values)if(this.Qe(i.ct)){if(this.i.orientation===r.v&&i.ct.x===t.x.max)return!0;if(this.i.orientation===r._&&i.ct.y===t.y.max)return!0}return!1}Qe(t){return this.i.orientation===r.v?"even"===this.i.offset&&t.y%2==0||"odd"===this.i.offset&&t.y%2!=0:"even"===this.i.offset&&t.x%2==0||"odd"===this.i.offset&&t.x%2!=0}Re(t){let e={vertical:"0px",ke:"0px"};return this.Oe()?(this.i.orientation===r.v?this.Le()?this.Qe(t)&&(e.ke=this.je.ke):this.Qe(t)||(e.ke=C(0,this.je.ke)):this.Le()?this.Qe(t)&&(e.vertical=this.je.vertical):this.Qe(t)||(e.vertical=C(0,this.je.vertical)),e):e}Ae(){let t="";if(!this.Oe())return t;let e=this.i.ht;if(this.i.orientation===r.v)for(let i=e.y.min;i<=e.y.max;i++)t+=this.u.R+`[data-elemap-y="${i}"]{`+`left:${this.Re({x:e.x.min,y:i}).ke};}`;else for(let i=e.x.min;i<=e.x.max;i++)t+=this.u.O+`[data-elemap-x="${i}"]{`+`top:${this.Re({x:i,y:e.y.min}).vertical};}`;return t}get je(){return this.i.orientation===r.v?{vertical:"0px",ke:T(this.O.size.W.width,2)}:{vertical:T(this.O.size.W.height,2),ke:"0px"}}get st(){let t="",e=this.i.ht;for(let i=e.y.min;i<=e.y.max;i++)this.i.ot[i]&&(t+=this.u.R+`[data-elemap-y="${i}"]{`+`top:${C(z(i-e.y.min,this.O.size.W.height),z(this.Ne.vertical,i-e.y.min))};}`);return t}get tt(){return{width:C(z(this.O.size.W.width,this.i.size.width),z(this.Ne.ke,this.i.size.width-1)),height:this.O.size.W.height}}get V(){let t=this.tt.width;this.i.orientation===r.v&&this.Oe()&&(this.Le()&&this.Me()?t=S(t,this.je.ke):this.Le()||this.Me()||(t=C(t,this.je.ke)));let e=C(z(this.O.size.W.height,this.i.size.height),z(this.Ne.vertical,this.i.size.height-1));return this.i.orientation===r._&&this.Oe()&&(this.Le()&&this.Me()?e=S(e,this.je.vertical):this.Le()||this.Me()||(e=C(e,this.je.vertical))),{width:t,height:e}}lt(t){let e=t.x-this.i.ht.x.min,i=t.y-this.i.ht.y.min,s=C(this.O.size.W.height,this.Ne.vertical),r=C(this.O.size.W.width,this.Ne.ke);return{top:S(z(i,s),this.Re(t).vertical),left:S(z(e,r),this.Re(t).ke)}}dt(t){let e=this.lt(t);return{top:S(e.top,T(this.spacing,2)),left:S(e.left,T(this.spacing,2))}}get rt(){let t="";for(let e of this.i.ot.values)for(let i of e.values)t+=this.u.O+i.u.data+"{"+`left:${C(this.lt(i.ct).left,this.Re(i.ct).ke)};}`;return t}}class Bt extends St{Ee(t){this.grid=new Pt(this.i.grid.o,this.o,t)}}class At extends xt{constructor(t){super(t,It)}static Jt(t){return this.Pt(At,t)}Kt(){return this.Bt()}ce(){return`${s.$}`}xe(t){this.style=new Bt(this.o,t)}}function Nt(t){let e=R(t,"grid");return{o:(s=R(t,"ids"),{map:R(s,"map")}),grid:{o:Y(R(e,"ids")),orientation:R(e,"orientation")||r.v,offset:R(e,"offset")||n.S,K:it(R(e,"schema")),ot:R(e,"tiles")},K:(i=st(R(t,"schema"))||{},{map:ot(i.map||{},ht),grid:lt(i.grid||{},ut),O:at(i.O||{},dt)}),le:R(t,"contents")||[]};var i,s}class kt{constructor(t){this.Ut=t,this.se(),this.Wt(),this.Vt(),this.Ge(),this.Fe(),this.He()}Kt(){return this.he()}se(){j(this,"export",(()=>this.he()))}he(){return this.Ut.Kt()}set extensions(t){}get extensions(){return this.ee()}Wt(){j(this,"extensions",{set:t=>{},get:()=>this.ee()})}ee(){return this.Ut.extensions}extend(t){return this.te(t)}Vt(){j(this,"extend",(t=>this.te(t)))}te(t){return this.Ut.extend(t)}ge(t){return this.Ye(t)}Ge(){j(this,"tileByCoords",(t=>this.Ye(t)))}Ye(t){let e=this.Ut.ge(Array.isArray(t)?t:rt(t));if(e)return new mt(e)}ze(t,e=!1){return this.Xe(t,e)}Fe(){j(this,"createTile",((t,e=!1)=>this.Xe(t,e)))}Xe(t,e){let i=this.Ut.ze(t,e);return i&&this.Ye(i)||!1}Te(t,e=[0,0],i=!1){return this.Ze(t,e,i)}He(){j(this,"createTiles",((t,e=[0,0],i=!1)=>this.Ze(t,e,i)))}Ze(t,e,i=!1){let s=this.Ut.Te(t,e,i),r=[];for(let t of s)t?r.push(this.Ye(t)||!1):r.push(!1);return r}}class Ot{constructor(t,e){let i=t===s.m?s.m:t===s.$?s.$:s.m;i===s.m?this.Ut=new Tt(Nt(e||{})):i===s.$&&(this.Ut=new At(Nt(e||{}))),this.se(),this.Wt(),this.De(),this.Vt(),this.Je(),this.Ke(),this.Ue(),this.Ve()}static Jt(t){return Qt(t)}Kt(){return this.he()}se(){j(this,"export",(()=>this.he()))}he(){return this.Ut.Kt()}set extensions(t){}get extensions(){return this.ee()}Wt(){j(this,"extensions",{set:t=>{},get:()=>this.ee()})}ee(){return this.Ut.extensions}extend(t){return this.te(t)}Vt(){j(this,"extend",(t=>this.te(t)))}te(t){return this.Ut.extend(t)}Ot(t){this.We(t)}De(){j(this,"render",(t=>this.We(t)))}We(t){this.Ut.Ot(t)}set grid(t){}get grid(){return this.ti()}Je(){j(this,"grid",{set:t=>{},get:()=>this.ti()})}ti(){let t=this.Ut.grid;if(t)return new kt(t)}me(t){return this.ei(t)}Ke(){j(this,"addContent",(t=>this.ei(t)))}ei(t){return this.Ut.me(t)}vt(t){return this.ii(t)}Ue(){j(this,"contentById",(t=>this.ii(t)))}ii(t){let e=this.Ut.vt(t);if(e)return new pt(e)}pe(t){return this.si(t)}Ve(){j(this,"contentByElement",(t=>this.si(t)))}si(t){let e=this.Ut.pe(t);if(e)return new pt(e)}static get ri(){return{m:s.m,$:s.$}}static get ni(){return{v:r.v,_:r._}}static get hi(){return{S:n.S,C:n.C}}}function Qt(t){return new Ot(t.type,t)}j(Ot,"import",Qt);const Lt=Ot})(),Elemap=e.default})();