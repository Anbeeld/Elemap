var Elemap;(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.t(i,s)&&!t.t(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},t:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{t.d(e,{default:()=>Rt});class i{constructor(){}get i(){return F.map.h(this.o.i)}get u(){return{l:`.elemap-${this.o.i.map}`}}}var s,r,n;function h(t){return void 0!==t.x&&void 0!==t.y}function o(t){return void 0!==t.p&&void 0!==t.r?t.p:t.y}function u(t,e){return parseFloat(t.toFixed(e))}!function(t){t.m="rectangle",t.$="hexagon"}(s||(s={})),function(t){t.v="pointy",t.S="flat"}(r||(r={})),function(t){t.C="odd",t.q="even"}(n||(n={}));const l=2/Math.sqrt(3);function a(t,e,i=0,s={top:0,left:0}){const n=Math.sin(30*Math.PI/180);const h=Math.cos(30*Math.PI/180),o=y(e.T),l=y(e.P)/(o*h*2),a=y(e.I)/(2*o);let c=0,d=0,f=u(o*h*l,2),p=u(o*n*a,2),m=u(f-i*h*l,2),g=u(i*n*a,2),x=u(f+i*h*l,2),$=u(2*f,2),v=u(p+o,2),w=u($-i*h*l,2),b=u(p-i*n*a,2),S=u(p+i*a,2),z=u(v+p,2),C=u(v-i*a,2),q=u(v+i*n*a,2),E=u(z-i*n*a,2),T=u(i*h*l,2);if(t===r.v)return c=u(c+s.left,2),f=u(f+s.left,2),m=u(m+s.left,2),x=u(x+s.left,2),$=u($+s.left,2),w=u(w+s.left,2),T=u(T+s.left,2),d=u(d+s.top,2),p=u(p+s.top,2),g=u(g+s.top,2),b=u(b+s.top,2),S=u(S+s.top,2),v=u(v+s.top,2),C=u(C+s.top,2),q=u(q+s.top,2),z=u(z+s.top,2),E=u(E+s.top,2),`M ${m},${g}Q ${f},${d} ${x},${g} L ${w},${b}Q ${$},${p} ${$},${S} L ${$},${C}Q ${$},${v} ${w},${q} L ${x},${E}Q ${f},${z} ${m},${E} L ${T},${q}Q ${c},${v} ${c},${C} L ${c},${S}Q ${c},${p} ${T},${b} Z`;if(t===r.S)return c=u(c+s.top,2),f=u(f+s.top,2),m=u(m+s.top,2),x=u(x+s.top,2),$=u($+s.top,2),w=u(w+s.top,2),T=u(T+s.top,2),d=u(d+s.left,2),p=u(p+s.left,2),g=u(g+s.left,2),b=u(b+s.left,2),S=u(S+s.left,2),v=u(v+s.left,2),C=u(C+s.left,2),q=u(q+s.left,2),z=u(z+s.left,2),E=u(E+s.left,2),`M ${g},${m}Q ${d},${f} ${g},${x} L ${b},${w}Q ${p},${$} ${S},${$} L ${C},${$}Q ${v},${$} ${q},${w} L ${E},${x}Q ${z},${f} ${E},${m} L ${q},${T}Q ${v},${c} ${C},${c} L ${S},${c}Q ${p},${c} ${b},${T} Z`;throw new Error("Invalid hexagon type")}function c(t,e=0,i={top:0,left:0}){let s=0,r=0,n=s+e,h=r+e,o=y(t.width),l=o-e,a=y(t.height),c=a-e;return s=u(s+i.left,2),o=u(o+i.left,2),l=u(l+i.left,2),n=u(n+i.left,2),r=u(r+i.top,2),a=u(a+i.top,2),h=u(h+i.top,2),c=u(c+i.top,2),`M ${s},${h}A ${e},${e} 0 0 1 ${n},${r} L ${l},${r}A ${e},${e} 0 0 1 ${o},${h} L ${o},${c}A ${e},${e} 0 0 1 ${l},${a} L ${n},${a}A ${e},${e} 0 0 1 ${s},${c} Z`}function d(t,e,i){let s={r:0,p:0};return e===r.v?(s.r=t.y,i===n.C?s.p=t.x-(t.y-(1&t.y))/2:s.p=t.x-(t.y+(1&t.y))/2):(s.p=t.x,i===n.C?s.r=t.y-(t.x-(1&t.x))/2:s.r=t.y-(t.x+(1&t.x))/2),s}function f(t,e,i){let s={x:0,y:0};return e===r.v?(s.y=t.r,i===n.C?s.x=t.p+(t.r-(1&t.r))/2:s.x=t.p+(t.r+(1&t.r))/2):(s.x=t.p,i===n.C?s.y=t.r+(t.p-(1&t.p))/2:s.y=t.r+(t.p+(1&t.p))/2),s}function p(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t,...e){if(!e.length)return t;const i=e.shift();if(p(t)&&p(i))for(const e in i)p(t[e])&&p(i[e])?m(t[e],i[e]):Object.assign(t,{[e]:i[e]});return m(t,...e)}class g{*[Symbol.iterator](){for(const t of this.keys)yield[t,this[t]]}get keys(){let t=[];for(const e of Object.keys(this)){let i;if("string"==typeof e){if(!v(e))continue;i=Number(e)}else{if("number"!=typeof e)continue;i=e}t.push(i)}return t.sort(((t,e)=>t-e)),t}get values(){let t=[];for(const e of this.keys)t.push(this[e]);return t}get length(){return this.keys.length}}class x extends g{}function $(t){let e=new g;if(p(t))for(const i in t)e[Number(i)]=t[i];return e}function v(t){return"string"==typeof t&&!isNaN(Number(t))}function y(t){return t.endsWith("px")?Number(t.slice(0,-2)):Number(t)}function w(t){if("number"==typeof t)return t;if(v(t))return Number(t);if(t.endsWith("px")&&v(t.slice(0,-2)))return Number(t.slice(0,-2));throw new Error(`Invalid calc value: ${t}`)}function b(t){return"number"==typeof t||"string"==typeof t&&(!!v(t)||!(!t.endsWith("px")||!v(t.slice(0,-2))))}function S(t){return t.every(b)}const z=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(S(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e+=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" + ")})`},C=function(...t){if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(S(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e-=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" - ")})`},q=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(S(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e*=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" * ")})`},E=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(S(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e/=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" / ")})`},T=(t,e)=>`${u(w(t),e)}px`;class P extends i{set o(t){this.A=t}get o(){return this.A}get i(){return F.grid.h(this.o.i)}get map(){return F.style.map.grid(this.o.i)}set N(t){this.k=t}get N(){return this.k}set O(t){this.L=t}get O(){return this.L}set M(t){this.R=t}get M(){return this.R}constructor(t,e,i){super(),this.o=new M(t,e,F.id()),this.F(i.M),this.N=i.grid}get u(){let t=`.elemap-${this.o.i.map}`,e=t+"-grid";return{l:t,frame:e+"-frame",B:e+"-frame-outer",j:e+"-frame-inner",grid:e,G:e+">div",M:e+">div>div",H:e+"-outer",Y:e+"-inner",X:e+"-outer>div",Z:e+"-inner>div",D:e+"-outer>div>div",J:e+"-inner>div>div",K:e+"-contour",U:t+"-mannequin"}}get spacing(){return q(this.M.O.inner.marginRight,2)}get V(){return this.u.B+"{display:block;position:absolute;z-index:50;}"+this.u.j+"{position:absolute;top:0;left:0;bottom:0;right:0;z-index:55;}"+this.u.U+"{display:none;}"+this.u.grid+"{overflow:hidden;}"+this.u.G+"{position:absolute;left:0;right:auto;bottom:auto;pointer-events:none;}"+this.u.M+"{pointer-events:auto;float:left;}"+this.u.H+"{position:absolute;z-index:100;}"+this.u.X+"{z-index:110;}"+this.u.D+"{position:absolute;z-index:120;}"+this.u.D+":before{z-index:130;}"+this.u.D+":after{z-index:140;}"+this.u.Y+"{position:relative;z-index:150;}"+this.u.Z+"{z-index:160;}"+this.u.J+"{position:absolute;z-index:170;}"+this.u.J+":after{z-index:190;}"+this.u.J+">*{position:relative;z-index:200;}"+this.u.K+"{display:block;position:absolute;z-index:210;pointer-events:none;}"+this.u.K+">div{display:block;position:absolute;z-index:220;}"}get W(){return this.u.B+"{"+this.N.frame._+"}"+this.u.j+"{"+this.N.frame.inner+"}"+this.u.K+">div{"+this.N.K+"}"}get tt(){let t=`{top: ${this.map.O.map.paddingTop};right: ${this.map.O.map.paddingRight};bottom: ${this.map.O.map.paddingBottom};left: ${this.map.O.map.paddingLeft};}`;return this.u.grid+"{"+`margin:${E(this.spacing,2)};`+`width: ${this.et.width};`+`height:${this.et.height};}`+this.u.B+t+this.u.H+t+this.u.K+t+this.u.K+"{"+`margin:${E(this.spacing,2)};}`+this.u.G+"{"+`height:${this.M.size._.height};`+`width: ${this.it.width};}`+this.u.D+"{"+`width:${this.M.size._.width};`+`height:${this.M.size._.height};}`+this.u.K+">div{display:none;top:0;left:0;"+`width:${this.M.size.st.width};`+`height:${this.M.size.st.height};}`+this.u.j+"{"+`clip-path: path('${this.rt}');}`+this.nt+this.ht+this.ot}get nt(){let t="",e=this.i.ut;for(let i=e.y.min;i<=e.y.max;i++)this.i.tiles[i]&&(t+=this.u.G+`[data-elemap-y="${i}"]{`+`top:${q(i-e.y.min,this.M.size._.height)};}`);return t}compute(){this.O={_:getComputedStyle(this.i.elements._),inner:getComputedStyle(this.i.elements.inner),lt:getComputedStyle(this.i.elements.lt)},this.M.compute()}get it(){return{width:q(this.M.size._.width,this.i.size.width),height:this.M.size._.height}}get et(){return{width:this.it.width,height:q(this.M.size._.height,this.i.size.height)}}ct(t){return{top:q(t.y-this.i.ut.y.min,this.M.size._.height),left:q(t.x-this.i.ut.x.min,this.M.size._.width)}}dt(t){let e=this.ct(t);return{top:z(e.top,E(this.spacing,2)),left:z(e.left,E(this.spacing,2))}}get ht(){let t="";for(let e of this.i.tiles.values)for(let i of e.values)t+=this.u.M+i.u.data+"{"+`left:${this.ct(i.ft).left};}`;return t}get gt(){return{top:z(this.map.O.map.paddingTop,E(this.spacing,2)),left:z(this.map.O.map.paddingLeft,E(this.spacing,2))}}xt(){for(let t of this.i.tiles.values)for(let e of t.values)e.$t()}}class I{constructor(t){this.map=t}}class A extends I{}class N extends A{constructor(t,e){super(t.map),this.grid=e}}class k extends N{constructor(t,e){super(t,t.grid),this.M=e}}class O extends A{constructor(t,e){super(t.map),this.content=e}}class Q{constructor(t,e){this.i=t,this.map=e}}class L extends Q{}class M extends L{constructor(t,e,i){super(t,e.map),this.grid=i}}class R extends M{constructor(t,e,i){super(t,e,i),this.M=i}}class F{static id(){return F.vt++}static add(t){F.yt.set(t.o.map,t)}static content(t){let e=F.map.h(t);if(e)return e.contentById(t)}}function B(t,e){if(t&&t.hasOwnProperty(e))return t[e]}function j(t,e,i){if(t)return t[e]=i,t}function G(t,e){for(let i of e)j(t,i[0],i[1]);return t}function H(t){let e={};return j(e,"map",t.map),e}function Y(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),e}function X(t){return{map:B(t,"map"),grid:B(t,"grid")}}function Z(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),j(e,"tile",t.M),e}function D(t){return{map:B(t,"map"),grid:B(t,"grid"),M:B(t,"tile")}}function J(t){let e={};return j(e,"map",t.map),j(e,"content",t.content),e}function K(t){return{map:B(t,"map"),content:B(t,"content")}}function U(t){let e={};return t&&(t.content?e=J(t):t.M&&(e=Z(t))),e}function V(t){return G({},[["outer",t._],["inner",t.inner]])}function W(t){return{_:B(t,"outer"),inner:B(t,"inner")}}function _(t){return G({},[["frame",V(t.frame)],["contour",t.K]])}function tt(t){return{frame:W(B(t,"frame")),K:B(t,"contour")}}function et(t){return G({},[["outer",t._],["inner",t.inner],["hover",G({},[["outer",t.wt._],["inner",t.wt.inner]])]])}function it(t){return{_:B(t,"outer"),inner:B(t,"inner"),wt:{_:B(B(t,"hover"),"outer"),inner:B(B(t,"hover"),"inner")}}}function st(t){return{grid:tt(B(t,"grid")),M:it(B(t,"tile"))}}function rt(t){return{map:W(B(t,"map")),grid:tt(B(t,"grid")),M:it(B(t,"tile"))}}function nt(t){return void 0!==B(t,"q")&&void 0!==B(t,"r")?{p:B(e=t,"q"),r:B(e,"r")}:function(t){return{x:B(t,"x"),y:B(t,"y")}}(t);var e}function ht(t){return void 0!==t.p&&void 0!==t.r?function(t){let e={};return j(e,"q",t.p),j(e,"r",t.r),e}(t):function(t){let e={};return j(e,"x",t.x),j(e,"y",t.y),e}(t)}F.vt=0,F.yt=new Map,F.map={h:t=>F.yt.get(t.map),grid:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e}},F.grid={h:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e.grid},bt:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e.grid},St:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e.grid}},F.M={h:t=>{let e=F.grid.h(t);if(e)return e.zt(t)}},F.style={map:{grid:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e.style}},grid:t=>{let e=F.map.h(t);if(e&&e instanceof $t)return e.style.grid},M:t=>{let e=F.map.h(t);if(e&&e instanceof $t&&e.style.grid&&e.style.grid instanceof P)return e.style.grid.M}};const ot={_:"padding:50px;background-color:#f5df8d;",inner:""};function ut(t,e){return{_:(e&&e._?e._:"")+(t._||""),inner:(e&&e.inner?e.inner:"")+(t.inner||"")}}const lt={frame:{_:"",inner:"background-color:#222222;"},K:"border: 2px solid transparent;background-color:#f5f5f5;"};function at(t,e){return{frame:{_:(e&&e.frame&&e.frame._?e.frame._:"")+(t.frame&&t.frame._?t.frame._:""),inner:(e&&e.frame&&e.frame.inner?e.frame.inner:"")+(t.frame&&t.frame.inner?t.frame.inner:"")},K:(e&&e.K?e.K:"")+(t.K||"")}}const ct={_:"background-color:#222222;",inner:"width:100px;height:100px;border-radius:6px;background-color:#b2e090;margin:2px;",wt:{_:"background-color:#f5f5f5;",inner:""}};function dt(t,e){return{_:(e&&e._?e._:"")+(t._||""),inner:(e&&e.inner?e.inner:"")+(t.inner||""),wt:{_:(e&&e.wt&&e.wt._?e.wt._:"")+(t.wt&&t.wt._?t.wt._:""),inner:(e&&e.wt&&e.wt.inner?e.wt.inner:"")+(t.wt&&t.wt.inner?t.wt.inner:"")}}}class ft{set o(t){this.A=t}get o(){return this.A}get grid(){return F.grid.h(this.o)}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:F.style.M(this.o)}get N(){return this.style.N}set elements(t){this.qt=t}get elements(){return this.qt}set coords(t){this.Et=t}get coords(){return this.Et}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){this.Pt=!1,this.Tt={},"number"==typeof t.o.M?this.o=new k(t.o,t.o.M):this.o=new k(t.o,F.id()),this.coords=t.coords,t.N&&"mannequin"!==t.N&&this.updateStyle(t.N)}static It(t,e){let i=new t(function(t){return{o:D(B(t,"ids")),coords:nt(B(t,"coords")),N:!!B(t,"decls")&&it(B(t,"decls")),extensions:B(t,"extensions")}}(e));return i.extend(e),i}extend(t){m(this.extensions,t)}At(){return this.Nt(this.kt())}kt(t={}){return G(t,[["ids",Z(this.o)],["coords",ht(this.coords)],["decls",void 0!==this.Ct&&et(this.N)]]),t}Nt(t={}){return G(t,[["extensions",this.extensions]]),t}updateStyle(t,e=!1){void 0===this.Ct||e?this.style=this.Ot(dt(t)):this.style=this.Ot(dt(t,this.N)),this.Pt&&this.render()}Qt(){this.elements||(this.elements={inner:document.createElement("div")})}render(){if(this.style.U&&this.style.i===this)this.Lt();else{let t=this.grid.elements.Mt[o(this.ft)],e=this.grid.elements.Rt[o(this.ft)];this.Qt(),this.Ft(),this.elements._&&(t.contains(this.elements._)||t.appendChild(this.elements._)),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}this.Pt=!0}Lt(){let t=this.grid.elements.U.X,e=this.grid.elements.U.Z;this.elements||(this.elements={inner:document.createElement("div"),_:document.createElement("div")}),this.elements._.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.classList.add("elemap-"+this.o.map+"-mannequin"),t.contains(this.elements._)||t.appendChild(this.elements._),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}$t(){if(void 0!==this.Ct&&!this.style.U){if(!this.elements.style){let t=document.head.getElementsByTagName("style");for(let e of t)e.classList.contains("elemap-"+this.o.map+"-css-tile-"+this.o.M)&&(this.elements.style=e);this.elements.style||(this.elements.style=document.createElement("style"),this.elements.style.classList.add("elemap-"+this.o.map+"-css-tile-"+this.o.M),document.head.appendChild(this.elements.style))}if(!this.elements._&&(this.N._.length||this.N.wt._.length)){this.elements._=document.createElement("div");let t=this.grid.elements.Mt[o(this.ft)];this.Ft(),this.elements._&&(t.contains(this.elements._)||t.appendChild(this.elements._))}}this.elements.style&&(this.elements.style.innerHTML=this.style.V+this.style.W+this.style.tt)}wt(){let t=F.grid.h(this.o);t&&t.Bt(this.jt)}Gt(){let t=F.grid.h(this.o);t&&t.Bt(!1)}get jt(){let t=F.grid.h(this.o);if(t){let e=this.elements.inner,i={x:0,y:0};for(;e;)if(i.x+=e.offsetLeft,i.y+=e.offsetTop,e=e.parentElement,e===t.elements.inner)return{x:i.x-y(t.style.spacing),y:i.y-y(t.style.spacing)}}return{x:0,y:0}}}class pt{set o(t){this.A=t}get o(){return this.A}get map(){return F.map.h(this.o)}set Ht(t){this.Yt=t}get Ht(){return this.Yt}set location(t){this.Xt=t}get location(){return this.Xt}get host(){return this.Xt.content?F.content(this.Xt):this.Xt.M?F.M.h(this.Xt):void 0}set offset(t){this.Zt=t}get offset(){return this.Zt}set elements(t){this.qt=t}get elements(){return this.qt}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){if(this.Xt=void 0,this.Tt={},"number"==typeof t.o.content?this.o=new O(t.o,t.o.content):this.o=new O(t.o,F.id()),"string"==typeof t.Ht){let e=document.createElement("div");e.innerHTML=t.Ht,this.elements={Ht:e.children[0]}}else this.elements={Ht:t.Ht};this.location=t.location,this.offset=t.offset}static import(t){let e=new pt(function(t){return{o:K(B(t,"ids")),Ht:B(t,"figure"),location:(e=B(t,"location"),e?B(e,"content")?K(e):B(e,"tile")?D(e):void 0:void 0),offset:B(t,"offset"),extensions:B(t,"extensions")};var e}(t));return e.extend(t),e}extend(t){m(this.extensions,t)}export(){return this.Nt(this.kt())}kt(t={}){return G(t,[["ids",J(this.o)],["figure",this.elements.Ht.outerHTML],["location",this.location?U(this.location):void 0],["offset",this.offset]]),t}Nt(t={}){return G(t,[["extensions",this.extensions]]),t}wt(){this.host&&"function"==typeof this.host.wt&&this.host.wt()}Gt(){this.host&&"function"==typeof this.host.Gt&&this.host.Gt()}Qt(){this.elements.container||(this.elements.container=document.createElement("div"))}render(){if(this.Qt(),this.host&&this.host instanceof ft){let t=this.host.style.grid.gt,e=this.host.style.grid.dt(this.host.ft),i=this.host.style.size.inner;this.elements.container.style.top=z(t.top,e.top,this.offset.top,E(i.height,2)),this.elements.container.style.left=z(t.left,e.left,this.offset.top,E(i.width,2))}this.elements.container.contains(this.elements.Ht)||this.elements.container.appendChild(this.elements.Ht),this.map.elements.content.contains(this.elements.container)||this.map.elements.content.appendChild(this.elements.container)}}class mt{constructor(t){this.Dt=t}extend(t){return this.Dt.extend(t)}get extensions(){return this.Dt.extensions}}class gt{constructor(t){this.Dt=t}get coords(){return ht(this.Dt.coords)}export(){return this.Dt.export()}get extensions(){return this.Dt.extensions}extend(t){return this.Dt.extend(t)}updateStyle(t,e=!1){this.Dt.updateStyle(it(t),e)}get elements(){let t={};return G(t,[["outer",this.Dt.elements._||void 0],["inner",this.Dt.elements.inner||void 0]]),t}}class xt{set o(t){this.A=t}get o(){return this.A}set elements(t){this.qt=t}get elements(){return this.qt}set style(t){this.Ct=t}get style(){return this.Ct}get Jt(){return{l:`elemap-${this.o.map}`,container:`elemap-${this.o.map}-container`,map:`elemap-${this.o.map}-map`}}set extensions(t){this.Tt=t}get extensions(){return this.Tt}set Kt(t){this.Ut=t}get Kt(){return this.Ut}constructor(t){this.Tt={},this.Ut=[],t.o&&"number"==typeof t.o.map?this.o=new A(t.o.map):this.o=new A(F.id()),F.add(this),t.Kt&&this.Vt(t.Kt)}At(){return this.Nt(this.kt())}kt(t={}){return G(t,[["type",this.Wt()],["ids",H(this.o)],["contents",this.Kt.map((t=>t.export()))]]),t}Nt(t={}){return G(t,[["extensions",this.extensions]]),t}Vt(t){for(let e of t)this.Kt.push(pt.import(e))}Qt(){if(this.elements&&this.elements.map)return this.elements;{let t=document.createElement("div");t.classList.add(`elemap-${this.o.map}-map`);let e=document.createElement("div");return e.classList.add(`elemap-${this.o.map}-content`),{map:t,content:e}}}_t(t){if(t&&this.elements.container!==t&&(this.elements.container=t,this.elements.container.innerHTML="",this.elements.container.classList.add("elemap-"+this.o.map+"-container")),!this.elements.container)throw new Error("No container found.");for(let t of document.getElementsByClassName("elemap-"+this.o.map+"-container"))t!==this.elements.container&&t.classList.remove("elemap-"+this.o.map+"-container");this.elements.container.appendChild(this.elements.map),this.elements.container.appendChild(this.elements.content)}render(t){this.elements=this.Qt(),this._t(t),this.style.render();for(let t of this.Kt)t.render()}contentById(t){for(let e of this.Kt)if(e.o.content===t.content)return e}contentByElement(t){for(let e of this.Kt)if(e.elements.Ht===t)return e}addContent(t){let e=function(t){return{Ht:B(t,"figure"),location:B(t,"location"),offset:B(t,"offset")}}(t);e.location instanceof gt?e.location=this.grid.tileByCoords(e.location.coords).o:e.location=void 0;let i=new pt(Object.assign(e,{o:this.o,offset:t.offset||{top:"0",right:"0"}}));return this.Kt.push(i),new mt(i)}}class $t extends xt{set style(t){this.Ct=t}get style(){return this.Ct}get W(){return{map:this.style.N,grid:this.style.grid.N,M:this.style.grid.M.N}}constructor(t,e){super(t),t.grid.o&&"number"==typeof t.grid.o.grid?this.grid=e.import(t.grid):this.grid=new e(Object.assign(t.grid,{o:this.o})),this.te(t.W),t.grid.tiles&&this.grid.ee(function(t){let e=new x;if(p(t))for(const i in t)e[Number(i)]=$(t[i]);return e}(t.grid.tiles))}static It(t,e){let i=new t(e);return i.extend(e),i}extend(t){m(this.extensions,t)}kt(t={}){var e;return G(t,[["type",this.Wt()],["ids",H(this.o)],["grid",this.grid.export()],["schema",(e=this.W,G({},[["map",V(e.map)],["grid",_(e.grid)],["tile",et(e.M)]]))],["contents",this.Kt.map((t=>t.export()))]]),t}Nt(t={}){return G(t,[["extensions",this.extensions]]),t}render(t){this.elements=this.Qt(),this._t(t),this.grid.render(this.elements.map),this.style.render();for(let t of this.Kt)t.render()}}class vt{set o(t){this.A=t}get o(){return this.A}get size(){return{width:this.ut.x.max-this.ut.x.min+1,height:this.ut.y.max-this.ut.y.min+1}}get ut(){let t,e,i,s;for(let r of this.tiles.keys){(void 0===t||r<t)&&(t=r),(void 0===e||r>e)&&(e=r);for(let t of this.tiles[r].keys)(void 0===i||t<i)&&(i=t),(void 0===s||t>s)&&(s=t)}return{x:{min:i||0,max:s||0},y:{min:t||0,max:e||0}}}zt(t){if(this.U.o.M===t.M)return this.U;for(let e in this.tiles)for(let i in this.tiles[e])if(this.tiles[e][i].o.M===t.M)return this.tiles[e][i]}get style(){return F.map.grid(this.o).style.grid}get W(){return{grid:this.style.N,M:this.style.M.N}}get Jt(){let t=`elemap-${this.o.map}`;return{l:t,frame:t+"-frame",B:t+"-frame-outer",j:t+"-frame-inner",grid:t+"-grid",H:t+"-outer",Y:t+"-inner",K:t+"-contour"}}get u(){return this.style.u}set orientation(t){this.ie=t}get orientation(){return this.ie}set offset(t){this.Zt=t}get offset(){return this.Zt}set elements(t){this.qt=t}get elements(){return this.qt}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){this.tiles=new x,this.Tt={},"number"==typeof t.o.grid?this.o=new N(t.o,t.o.grid):this.o=new N(t.o,F.id()),this.orientation=t.orientation,this.offset=t.offset}static It(t,e){let i=new t(e);return i.extend(e),i}extend(t){m(this.extensions,t)}At(){return this.Nt(this.kt())}kt(t={}){let e=new g;for(let[t,i]of this.tiles){e[t]=new g;for(let[s,r]of i)e[t][s]=r.export()}var i;return G(t,[["ids",Y(this.o)],["orientation",this.orientation],["offset",this.offset],["schema",(i=this.W,G({},[["grid",_(i.grid)],["tile",et(i.M)]]))],["tiles",e]]),t}Nt(t={}){return G(t,[["extensions",this.extensions]]),t}ee(t){for(let[e,i]of t)for(let[t,s]of i)this.tiles[e]||(this.tiles[e]=new g),this.tiles[e][t]=this.se(s)}Qt(){this.elements||(this.elements={B:document.createElement("div"),j:document.createElement("div"),_:document.createElement("div"),inner:document.createElement("div"),Mt:new g,Rt:new g,K:document.createElement("div"),lt:document.createElement("div"),U:{X:document.createElement("div"),D:document.createElement("div"),Z:document.createElement("div"),J:document.createElement("div")}},this.elements.B.classList.add("elemap-"+this.o.map+"-grid-frame-outer"),this.elements.j.classList.add("elemap-"+this.o.map+"-grid-frame-inner"),this.elements.B.appendChild(this.elements.j),this.elements._.classList.add("elemap-"+this.o.map+"-grid"),this.elements._.classList.add("elemap-"+this.o.map+"-grid-outer"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid-inner"),this.elements.K.classList.add("elemap-"+this.o.map+"-grid-contour"),this.elements.K.appendChild(this.elements.lt),this.elements.U.X.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements._.appendChild(this.elements.U.X),this.elements.U.Z.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.appendChild(this.elements.U.Z),this.style.M.i.render())}render(t){this.Qt(),t.innerHTML="";for(let t in this.elements.Mt)for(let e of this.elements.Mt[t].children)this.re(e)||this.elements.Mt[t].removeChild(e);for(let t in this.elements.Rt)for(let e of this.elements.Rt[t].children)this.re(e)||this.elements.Rt[t].removeChild(e);for(let[t,e]of this.tiles){void 0===this.elements.Mt[t]&&(this.elements.Mt[t]=document.createElement("div"),j(this.elements.Mt[t].dataset,"elemapY",t.toString()),this.elements._.appendChild(this.elements.Mt[t])),void 0===this.elements.Rt[t]&&(this.elements.Rt[t]=document.createElement("div"),j(this.elements.Rt[t].dataset,"elemapY",t.toString()),this.elements.inner.appendChild(this.elements.Rt[t]));for(let t of e.values)t.render()}t.appendChild(this.elements.B),t.appendChild(this.elements._),t.appendChild(this.elements.inner),t.appendChild(this.elements.K),this.elements.inner.addEventListener("mouseover",(t=>{let e=t.target.closest(this.u.J);e&&this.re(e).wt()})),this.elements.inner.addEventListener("mouseout",(t=>{let e=t.target.closest(this.u.J);e&&this.re(e).Gt()}))}Bt(t){!1===t?this.elements.lt.removeAttribute("style"):(this.elements.lt.style.display="block",this.elements.lt.style.transform=`translate(${t.x}px, ${t.y}px)`)}}class yt extends i{set o(t){this.A=t}get o(){return this.A}get i(){return F.M.h(this.o.i)}get grid(){return F.style.grid(this.o.i)}get spacing(){return this.grid.spacing}set O(t){this.L=t}get O(){return this.L||this.compute(),this.L}get u(){return Object.assign(Object.assign({},this.grid.u),{data:this.U?"":this.i.u.data})}set N(t){this.k=t}get N(){return this.k}constructor(t,e,i,s=!1){super(),this.o=new R(t,e,F.id()),this.U=s,this.N=i}get size(){let t={width:this.O.inner.width,height:this.O.inner.height};return{st:{width:z(t.width,q(this.spacing,2)),height:z(t.height,q(this.spacing,2))},_:{width:z(t.width,this.spacing),height:z(t.height,this.spacing)},inner:t}}get V(){return""}get W(){let t="";return this.N._.length&&(t+=this.u.D+this.u.data+"{"+this.N._+"}"),this.N.inner.length&&(t+=this.u.J+this.u.data+"{"+this.N.inner+"}"),this.N.wt._.length&&(t+=this.u.D+this.u.data+":hover{"+this.N.wt._+"}"),this.N.wt.inner.length&&(t+=this.u.J+this.u.data+":hover{"+this.N.wt.inner+"}"),t}get tt(){return""}compute(){this.O={inner:getComputedStyle(this.i.elements.inner)}}get ne(){return this.grid.ct(this.i.ft)}get he(){return this.grid.dt(this.i.ft)}}class wt extends yt{}class bt extends ft{constructor(t){super(t)}get ft(){return this.coords}static import(t){return this.It(bt,t)}export(){return this.At()}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:F.style.M(this.o)}Ot(t){return new wt(this.o,this.grid.style.o,t)}Ft(){this.elements._&&(j(this.elements._.dataset,"elemapX",this.coords.x.toString()),j(this.elements._.dataset,"elemapY",this.coords.y.toString())),j(this.elements.inner.dataset,"elemapX",this.coords.x.toString()),j(this.elements.inner.dataset,"elemapY",this.coords.y.toString())}get u(){return{data:`[data-elemap-x="${this.coords.x}"][data-elemap-y="${this.coords.y}"]`}}}class St extends vt{constructor(t){super(t)}static import(t){return this.It(St,t)}export(){return this.At()}oe(t){return new bt(t)}se(t){return bt.import(t)}ue(t){return t}createTile(t,e){return Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.tiles[t.y]||(this.tiles[t.y]=new g),!(!e&&this.tiles[t.y][t.x])&&(this.tiles[t.y][t.x]=this.oe({o:this.o,coords:this.ue(t),N:!1}),t)}createTiles(t,e,i){let s=[];Array.isArray(e)&&(e={x:e[0],y:e[1]});for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.createTile({x:r,y:n},i));return s}tileByCoords(t){if(Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.tiles[t.y]&&this.tiles[t.y][t.x])return this.tiles[t.y][t.x]}re(t){if(t.hasAttribute("data-elemap-x")&&t.hasAttribute("data-elemap-y")){let e=this.tileByCoords({x:Number(t.getAttribute("data-elemap-x")),y:Number(t.getAttribute("data-elemap-y"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements._&&e.elements._===t))return e}}}class zt extends i{set o(t){this.A=t}get o(){return this.A}set N(t){this.k=t}get N(){return this.k}set elements(t){this.qt=t}get elements(){return this.qt}set O(t){this.L=t}get O(){return this.L}constructor(t,e){super(),this.o=new L(t,F.id()),this.N=e.map}export(){return G(this.N,[["outer",this.N._],["inner",this.N.inner]])}Qt(){let t,e,i,s=document.head.getElementsByTagName("style");for(let r of s)r.classList.contains(this.i.Jt.l+"-css-core")?t=r:r.classList.contains(this.i.Jt.l+"-css-schema")?e=r:r.classList.contains(this.i.Jt.l+"-css-generated")&&(i=r);return t||(t=document.createElement("style"),t.classList.add(this.i.Jt.l+"-css-core"),document.head.appendChild(t)),e||(e=document.createElement("style"),e.classList.add(this.i.Jt.l+"-css-schema"),document.head.appendChild(e)),i||(i=document.createElement("style"),i.classList.add(this.i.Jt.l+"-css-generated"),document.head.appendChild(i)),{V:t,W:e,tt:i}}render(){this.elements=this.Qt(),this.elements.V.innerHTML=this.V,this.elements.W.innerHTML=this.W,this.i.elements.map.offsetHeight,this.compute(),this.elements.tt.innerHTML=this.tt}get u(){return{l:`.elemap-${this.o.i.map}`,container:`.elemap-${this.o.i.map}-container`,map:`.elemap-${this.o.i.map}-map`,content:`.elemap-${this.o.i.map}-content`}}get V(){return this.u.container+"{width:max-content;position:relative;}"+this.u.map+"{position:relative;width:max-content;z-index:10;display: flex;}"+this.u.content+"{position:absolute;z-index:500;top:0;left:0;bottom:0;right:0;pointer-events:none;}"+this.u.content+">div{width: 0px;height: 0px;position: absolute;overflow:visible}"+this.u.content+">div>*{position: absolute;transform: translate(-50%, -100%);}"}get W(){return this.u.map+"{"+this.N._+"}"+this.u.map+">*{"+this.N.inner+"}"}compute(){this.O={map:getComputedStyle(this.i.elements.map)}}get tt(){return""}}class Ct extends zt{set grid(t){this.le=t}get grid(){return this.le}get i(){return F.map.grid(this.o.i)}constructor(t,e){super(t,e),this.ae(e)}render(){this.elements=this.Qt(),this.elements.V.innerHTML=this.V+this.grid.V+this.grid.M.V,this.elements.W.innerHTML=this.W+this.grid.W+this.grid.M.W,this.i.elements.map.offsetHeight,this.i.grid.elements.inner.offsetHeight,this.compute(),this.elements.tt.innerHTML=this.tt+this.grid.tt+this.grid.M.tt,this.grid.xt();let t=document.head.getElementsByTagName("style"),e=Array.from(t);for(let t of e)for(let e of t.classList)if(e.startsWith(this.i.Jt.l+"-css-")){let e=!1;if(t!==this.elements.V&&t!==this.elements.W&&t!==this.elements.tt||(e=!0),!e)for(let i of this.grid.i.tiles.values){for(let s of i.values)if(t===s.elements.style){e=!0;break}if(e)break}e||t.remove()}}compute(){this.O={map:getComputedStyle(this.i.elements.map)},this.grid.compute()}}class qt extends P{get i(){return F.grid.bt(this.o.i)}set M(t){this.R=t}get M(){return this.R}F(t){this.i.U=new bt({o:this.i.o,coords:{x:0,y:0},N:"mannequin"}),this.M=new wt(this.i.U.o,this.o,t,!0)}get ot(){let t=u(y(this.O.lt.borderWidth),0)+"px",e={width:C(this.M.size.st.width,q(t,2)),height:C(this.M.size.st.height,q(t,2))},i=c(this.M.size.st,y(this.M.O.inner.borderRadius)),s=c(e,y(this.M.O.inner.borderRadius),{top:y(t),left:y(t)});return this.u.K+">div{"+`clip-path:path(evenodd,'${i} ${s}');}`}get rt(){let t="",e=this.i.ut;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.tiles[i]||!this.i.tiles[i][s])continue;""!==t&&(t+=" ");let e=this.ct({x:s,y:i});t+=c(this.M.size.st,y(this.M.O.inner.borderRadius),{top:y(e.top),left:y(e.left)})}return t}}class Et extends Ct{ae(t){this.grid=new qt(this.i.grid.o,this.o,t)}}class Tt extends $t{constructor(t){super(t,St)}static import(t){return this.It(Tt,t)}export(){return this.At()}Wt(){return`${s.m}`}te(t){this.style=new Et(this.o,t)}}class Pt extends yt{}class It extends ft{constructor(t){super(t)}get ft(){let t=f(this.coords,this.grid.orientation,this.grid.offset);return{x:t.x,y:t.y}}static import(t){return this.It(It,t)}export(){return this.At()}set style(t){this.Ct=t}get style(){return void 0!==this.Ct?this.Ct:F.style.M(this.o)}Ot(t){return new Pt(this.o,this.grid.style.o,t)}Ft(){this.elements._&&(j(this.elements._.dataset,"elemapR",this.coords.r.toString()),j(this.elements._.dataset,"elemapQ",this.coords.p.toString())),j(this.elements.inner.dataset,"elemapR",this.coords.r.toString()),j(this.elements.inner.dataset,"elemapQ",this.coords.p.toString()),this.elements._&&(j(this.elements._.dataset,"elemapX",this.ft.x.toString()),j(this.elements._.dataset,"elemapY",this.ft.y.toString())),j(this.elements.inner.dataset,"elemapX",this.ft.x.toString()),j(this.elements.inner.dataset,"elemapY",this.ft.y.toString())}get u(){return{data:`[data-elemap-r="${this.coords.r}"][data-elemap-q="${this.coords.p}"]`}}}class At extends vt{constructor(t){super(t)}static import(t){return this.It(At,t)}export(){return this.At()}oe(t){return new It(t)}se(t){return It.import(t)}ue(t){return d(t,this.orientation,this.offset)}tileByCoords(t){Array.isArray(t)&&(t={p:t[0],r:t[1]});let e=h(t)?t:f(t,this.orientation,this.offset);if(this.tiles[e.y]&&this.tiles[e.y][e.x])return this.tiles[e.y][e.x]}re(t){if(t.hasAttribute("data-elemap-r")&&t.hasAttribute("data-elemap-q")){let e=this.tileByCoords({p:Number(t.getAttribute("data-elemap-q")),r:Number(t.getAttribute("data-elemap-r"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements._&&e.elements._===t))return e}}createTile(t,e){Array.isArray(t)&&(t={p:t[0],r:t[1]});let i=h(t)?t:f(t,this.orientation,this.offset);return this.tiles[i.y]||(this.tiles[i.y]=new g),!(!e&&this.tiles[i.y][i.x])&&(this.tiles[i.y][i.x]=this.oe({o:this.o,coords:this.ue(i),N:!1}),t)}createTiles(t,e,i){let s=[];if(Array.isArray(e)&&(e={p:e[0],r:e[1]}),h(e))for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.createTile(d({x:r,y:n},this.orientation,this.offset),i));else for(let r=e.p;r<e.p+t.width;r++)for(let n=e.r;n<e.r+t.height;n++)s.push(this.createTile({p:r,r:n},i));return s}ce(t){return this.offset===n.C?t%2!=0:t%2==0}}class Nt extends P{get i(){return F.grid.St(this.o.i)}set M(t){this.R=t}get M(){return this.R}F(t){this.i.U=new It({o:this.i.o,coords:{p:0,r:0},N:"mannequin"}),this.M=new Pt(this.i.U.o,this.o,t,!0)}get de(){return this.i.orientation===r.v?{st:{T:E(this.M.size.st.height,2),I:this.M.size.st.height,P:this.M.size.st.width},_:{T:E(this.M.size._.height,2),I:this.M.size._.height,P:this.M.size._.width},inner:{T:E(this.M.size.inner.height,2),I:this.M.size.inner.height,P:this.M.size.inner.width}}:{st:{T:E(this.M.size.st.width,2),I:this.M.size.st.width,P:this.M.size.st.height},_:{T:E(this.M.size._.width,2),I:this.M.size._.width,P:this.M.size._.height},inner:{T:E(this.M.size.inner.width,2),I:this.M.size.inner.width,P:this.M.size.inner.height}}}compute(){this.O={_:getComputedStyle(this.i.elements._),inner:getComputedStyle(this.i.elements.inner),lt:getComputedStyle(this.i.elements.lt)},this.M.compute(),this.fe(),this.M.compute()}fe(){let t,e;this.i.orientation===r.v?(e=C(this.M.size._.height,this.M.size.inner.height),t=T(q(this.M.size.inner.width,l),0),this.map.elements.W.innerHTML+=this.u.D+"{height:"+z(t,e)+"}"+this.u.J+"{height:"+t+"}"):(e=C(this.M.size._.width,this.M.size.inner.width),t=T(q(this.M.size.inner.height,l),0),this.map.elements.W.innerHTML+=this.u.D+"{width:"+z(t,e)+"}"+this.u.J+"{width:"+t+"}")}get rt(){let t="",e=this.i.ut;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.tiles[i]||!this.i.tiles[i][s])continue;""!==t&&(t+=" ");let e=this.ct({x:s,y:i});t+=a(this.i.orientation,this.de.st,y(this.M.O.inner.borderRadius),{top:y(e.top),left:y(e.left)})}return t}get ot(){let t=u(y(this.O.lt.borderWidth),0)+"px",e=C(this.de.st.I,q(t,2)),i={T:E(e,2),I:e,P:C(this.de.st.P,q(t,2))},s=a(this.i.orientation,this.de.st,y(this.M.O.inner.borderRadius)),r=a(this.i.orientation,i,y(this.M.O.inner.borderRadius),{top:y(t),left:y(t)});return this.u.J+"{"+`clip-path:path('${a(this.i.orientation,this.de.inner,y(this.M.O.inner.borderRadius))}');}`+this.u.D+"{"+`clip-path:path('${a(this.i.orientation,this.de._,0)}');}`+this.u.K+">div{"+`clip-path:path(evenodd,'${s} ${r}');}`+this.pe()}get me(){return this.i.orientation===r.v?{vertical:E(this.M.size._.height,4),ge:"0px"}:{vertical:"0px",ge:E(this.M.size._.width,4)}}xe(){let t=!1,e=!1;for(let i of this.i.tiles.values){for(let s of i.values)this.$e(s.ft)?t=!0:e=!0;if(t&&e)break}return t&&e}ve(){let t=this.i.ut;for(let e of this.i.tiles.values)for(let i of e.values)if(!this.$e(i.ft)){if(this.i.orientation===r.v&&i.ft.x===t.x.min)return!0;if(this.i.orientation===r.S&&i.ft.y===t.y.min)return!0}return!1}ye(){let t=this.i.ut;for(let e of this.i.tiles.values)for(let i of e.values)if(this.$e(i.ft)){if(this.i.orientation===r.v&&i.ft.x===t.x.max)return!0;if(this.i.orientation===r.S&&i.ft.y===t.y.max)return!0}return!1}$e(t){return this.i.orientation===r.v?"even"===this.i.offset&&t.y%2==0||"odd"===this.i.offset&&t.y%2!=0:"even"===this.i.offset&&t.x%2==0||"odd"===this.i.offset&&t.x%2!=0}we(t){let e={vertical:"0px",ge:"0px"};return this.xe()?(this.i.orientation===r.v?this.ve()?this.$e(t)&&(e.ge=this.be.ge):this.$e(t)||(e.ge=C(0,this.be.ge)):this.ve()?this.$e(t)&&(e.vertical=this.be.vertical):this.$e(t)||(e.vertical=C(0,this.be.vertical)),e):e}pe(){let t="";if(!this.xe())return t;let e=this.i.ut;if(this.i.orientation===r.v)for(let i=e.y.min;i<=e.y.max;i++)t+=this.u.G+`[data-elemap-y="${i}"]{`+`left:${this.we({x:e.x.min,y:i}).ge};}`;else for(let i=e.x.min;i<=e.x.max;i++)t+=this.u.M+`[data-elemap-x="${i}"]{`+`top:${this.we({x:i,y:e.y.min}).vertical};}`;return t}get be(){return this.i.orientation===r.v?{vertical:"0px",ge:E(this.M.size._.width,2)}:{vertical:E(this.M.size._.height,2),ge:"0px"}}get nt(){let t="",e=this.i.ut;for(let i=e.y.min;i<=e.y.max;i++)this.i.tiles[i]&&(t+=this.u.G+`[data-elemap-y="${i}"]{`+`top:${C(q(i-e.y.min,this.M.size._.height),q(this.me.vertical,i-e.y.min))};}`);return t}get it(){return{width:C(q(this.M.size._.width,this.i.size.width),q(this.me.ge,this.i.size.width-1)),height:this.M.size._.height}}get et(){let t=this.it.width;this.i.orientation===r.v&&this.xe()&&(this.ve()&&this.ye()?t=z(t,this.be.ge):this.ve()||this.ye()||(t=C(t,this.be.ge)));let e=C(q(this.M.size._.height,this.i.size.height),q(this.me.vertical,this.i.size.height-1));return this.i.orientation===r.S&&this.xe()&&(this.ve()&&this.ye()?e=z(e,this.be.vertical):this.ve()||this.ye()||(e=C(e,this.be.vertical))),{width:t,height:e}}ct(t){let e=t.x-this.i.ut.x.min,i=t.y-this.i.ut.y.min,s=C(this.M.size._.height,this.me.vertical),r=C(this.M.size._.width,this.me.ge);return{top:z(q(i,s),this.we(t).vertical),left:z(q(e,r),this.we(t).ge)}}dt(t){let e=this.ct(t);return{top:z(e.top,E(this.spacing,2)),left:z(e.left,E(this.spacing,2))}}get ht(){let t="";for(let e of this.i.tiles.values)for(let i of e.values)t+=this.u.M+i.u.data+"{"+`left:${C(this.ct(i.ft).left,this.we(i.ft).ge)};}`;return t}}class kt extends Ct{ae(t){this.grid=new Nt(this.i.grid.o,this.o,t)}}class Ot extends $t{constructor(t){super(t,At)}static import(t){return this.It(Ot,t)}export(){return this.At()}Wt(){return`${s.$}`}te(t){this.style=new kt(this.o,t)}}function Qt(t){let e=B(t,"grid");return{o:(s=B(t,"ids"),{map:B(s,"map")}),grid:{o:X(B(e,"ids")),orientation:B(e,"orientation")||r.v,offset:B(e,"offset")||n.C,W:st(B(e,"schema")),tiles:B(e,"tiles")},W:(i=rt(B(t,"schema"))||{},{map:ut(i.map||{},ot),grid:at(i.grid||{},lt),M:dt(i.M||{},ct)}),Kt:B(t,"contents")||[]};var i,s}class Lt{constructor(t){this.Dt=t}export(){return this.Dt.export()}get extensions(){return this.Dt.extensions}extend(t){return this.Dt.extend(t)}tileByCoords(t){let e=this.Dt.tileByCoords(Array.isArray(t)?t:nt(t));if(e)return new gt(e)}createTile(t,e){let i=this.Dt.createTile(t,e);return i&&this.tileByCoords(i)||!1}createTiles(t,e,i=!1){let s=this.Dt.createTiles(t,e,i),r=[];for(let t of s)t?r.push(this.tileByCoords(t)||!1):r.push(!1);return r}get tiles(){let t=new x;for(let[e,i]of this.Dt.tiles){t[e]=new g;for(let[s,r]of i)t[e][s]=new gt(r)}return t}}class Mt{constructor(t,e){let i=t===s.m?s.m:t===s.$?s.$:s.m;i===s.m?this.Dt=new Tt(Qt(e||{})):i===s.$&&(this.Dt=new Ot(Qt(e||{})))}static import(t){return new Mt(t.type,t)}export(){return this.Dt.export()}get extensions(){return this.Dt.extensions}extend(t){return this.Dt.extend(t)}render(t){this.Dt.render(t)}get grid(){let t=this.Dt.grid;if(t)return new Lt(t)}addContent(t){return this.Dt.addContent(t)}contentById(t){let e=this.Dt.contentById(t);if(e)return new mt(e)}contentByElement(t){let e=this.Dt.contentByElement(t);if(e)return new mt(e)}static get Se(){return{m:s.m,$:s.$}}static get ze(){return{v:r.v,S:r.S}}static get Ce(){return{C:n.C,q:n.q}}}const Rt=Mt})(),Elemap=e.default})();