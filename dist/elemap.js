var Elemap;(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.t(i,s)&&!t.t(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},t:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{t.d(e,{default:()=>jt});class i{constructor(){}get i(){return G.map.h(this.ids.i)}get o(){return{u:`.elemap-${this.ids.i.map}`}}}var s,r,n;function h(t){return void 0!==t.x&&void 0!==t.y}function o(t){return void 0!==t.l&&void 0!==t.r?t.l:t.y}function u(t,e){return parseFloat(t.toFixed(e))}!function(t){t.p="rectangle",t.m="hexagon"}(s||(s={})),function(t){t.$="pointy",t.v="flat"}(r||(r={})),function(t){t.S="odd",t.C="even"}(n||(n={}));const l=2/Math.sqrt(3);function a(t,e,i=0,s={top:0,left:0}){const n=Math.sin(30*Math.PI/180);const h=Math.cos(30*Math.PI/180),o=S(e.q),l=S(e.T)/(o*h*2),a=S(e.k)/(2*o);let c=0,d=0,f=u(o*h*l,2),p=u(o*n*a,2),m=u(f-i*h*l,2),g=u(i*n*a,2),x=u(f+i*h*l,2),$=u(2*f,2),v=u(p+o,2),y=u($-i*h*l,2),w=u(p-i*n*a,2),b=u(p+i*a,2),z=u(v+p,2),C=u(v-i*a,2),q=u(v+i*n*a,2),T=u(z-i*n*a,2),k=u(i*h*l,2);if(t===r.$)return c=u(c+s.left,2),f=u(f+s.left,2),m=u(m+s.left,2),x=u(x+s.left,2),$=u($+s.left,2),y=u(y+s.left,2),k=u(k+s.left,2),d=u(d+s.top,2),p=u(p+s.top,2),g=u(g+s.top,2),w=u(w+s.top,2),b=u(b+s.top,2),v=u(v+s.top,2),C=u(C+s.top,2),q=u(q+s.top,2),z=u(z+s.top,2),T=u(T+s.top,2),`M ${m},${g}Q ${f},${d} ${x},${g} L ${y},${w}Q ${$},${p} ${$},${b} L ${$},${C}Q ${$},${v} ${y},${q} L ${x},${T}Q ${f},${z} ${m},${T} L ${k},${q}Q ${c},${v} ${c},${C} L ${c},${b}Q ${c},${p} ${k},${w} Z`;if(t===r.v)return c=u(c+s.top,2),f=u(f+s.top,2),m=u(m+s.top,2),x=u(x+s.top,2),$=u($+s.top,2),y=u(y+s.top,2),k=u(k+s.top,2),d=u(d+s.left,2),p=u(p+s.left,2),g=u(g+s.left,2),w=u(w+s.left,2),b=u(b+s.left,2),v=u(v+s.left,2),C=u(C+s.left,2),q=u(q+s.left,2),z=u(z+s.left,2),T=u(T+s.left,2),`M ${g},${m}Q ${d},${f} ${g},${x} L ${w},${y}Q ${p},${$} ${b},${$} L ${C},${$}Q ${v},${$} ${q},${y} L ${T},${x}Q ${z},${f} ${T},${m} L ${q},${k}Q ${v},${c} ${C},${c} L ${b},${c}Q ${p},${c} ${w},${k} Z`;throw new Error("Invalid hexagon type")}function c(t,e=0,i={top:0,left:0}){let s=0,r=0,n=s+e,h=r+e,o=S(t.width),l=o-e,a=S(t.height),c=a-e;return s=u(s+i.left,2),o=u(o+i.left,2),l=u(l+i.left,2),n=u(n+i.left,2),r=u(r+i.top,2),a=u(a+i.top,2),h=u(h+i.top,2),c=u(c+i.top,2),`M ${s},${h}A ${e},${e} 0 0 1 ${n},${r} L ${l},${r}A ${e},${e} 0 0 1 ${o},${h} L ${o},${c}A ${e},${e} 0 0 1 ${l},${a} L ${n},${a}A ${e},${e} 0 0 1 ${s},${c} Z`}function d(t,e,i){let s={r:0,l:0};return e===r.$?(s.r=t.y,i===n.S?s.l=t.x-(t.y-(1&t.y))/2:s.l=t.x-(t.y+(1&t.y))/2):(s.l=t.x,i===n.S?s.r=t.y-(t.x-(1&t.x))/2:s.r=t.y-(t.x+(1&t.x))/2),s}function f(t,e,i){let s={x:0,y:0};return e===r.$?(s.y=t.r,i===n.S?s.x=t.l+(t.r-(1&t.r))/2:s.x=t.l+(t.r+(1&t.r))/2):(s.x=t.l,i===n.S?s.y=t.r+(t.l-(1&t.l))/2:s.y=t.r+(t.l+(1&t.l))/2),s}function p(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t,...e){if(!e.length)return t;const i=e.shift();if(p(t)&&p(i))for(const e in i)p(t[e])&&p(i[e])?m(t[e],i[e]):Object.assign(t,{[e]:i[e]});return m(t,...e)}class g{*[Symbol.iterator](){for(const t of this.keys)yield[t,this[t]]}get keys(){let t=[];for(const e of Object.keys(this)){let i;if("string"==typeof e){if(!v(e))continue;i=Number(e)}else{if("number"!=typeof e)continue;i=e}t.push(i)}return t.sort(((t,e)=>t-e)),t}get values(){let t=[];for(const e of this.keys)t.push(this[e]);return t}get length(){return this.keys.length}}class x extends g{}function $(t){let e=new g;if(p(t))for(const i in t)e[Number(i)]=t[i];return e}function v(t){return"string"==typeof t&&!isNaN(Number(t))}function y(t){if(t.constructor===Array){let e=t;t={};for(let[i,s]of e){let e=i.split("."),r=t;for(let t of e.slice(0,e.length-1))r[t]||(r[t]={}),r=r[t];r[e[e.length-1]]=s}}return t}function w(t,e){for(let i of e){let e=i.split("."),s=t;for(let t of e.slice(0,e.length-1))s=s[t];delete s[e[e.length-1]]}}function b(t){const{tagName:e,id:i,className:s,parentNode:r}=t;if("HTML"===e)return"HTML";let n=e;if(n+=""!==i?`#${i}`:"",s){const t=s.split(/\s/);for(let e=0;e<t.length;e++)n+=`.${t[e]}`}let h=1;for(let e=t;e.previousElementSibling;e=e.previousElementSibling)h+=1;return n+=`:nth-child(${h})`,`${b(r)} > ${n}`}function S(t){return t.endsWith("px")?Number(t.slice(0,-2)):Number(t)}function z(t){if("number"==typeof t)return t;if(v(t))return Number(t);if(t.endsWith("px")&&v(t.slice(0,-2)))return Number(t.slice(0,-2));throw new Error(`Invalid calc value: ${t}`)}function C(t){return"number"==typeof t||"string"==typeof t&&(!!v(t)||!(!t.endsWith("px")||!v(t.slice(0,-2))))}function q(t){return t.every(C)}const T=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${z(t[0])}px`;if(q(t)){let e=z(t[0]);for(let i=1;i<t.length;i++)e+=z(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" + ")})`},k=function(...t){if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${z(t[0])}px`;if(q(t)){let e=z(t[0]);for(let i=1;i<t.length;i++)e-=z(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" - ")})`},E=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${z(t[0])}px`;if(q(t)){let e=z(t[0]);for(let i=1;i<t.length;i++)e*=z(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" * ")})`},P=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${z(t[0])}px`;if(q(t)){let e=z(t[0]);for(let i=1;i<t.length;i++)e/=z(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" / ")})`},N=(t,e)=>`${u(z(t),e)}px`;class A extends i{set ids(t){this.P=t}get ids(){return this.P}get i(){return G.grid.h(this.ids.i)}get map(){return G.style.map.grid(this.ids.i)}set N(t){this.A=t}get N(){return this.A}set I(t){this.L=t}get I(){return this.L}set M(t){this.O=t}get M(){return this.O}constructor(t,e,i){super(),this.ids=new B(t,e,G.id()),this.R(i.M),this.N=i.grid}get o(){let t=`.elemap-${this.ids.i.map}`,e=t+"-grid";return{u:t,frame:e+"-frame",F:e+"-frame-outer",B:e+"-frame-inner",grid:e,j:e+">div",M:e+">div>div",G:e+"-outer",H:e+"-inner",Y:e+"-outer>div",X:e+"-inner>div",Z:e+"-outer>div>div",D:e+"-inner>div>div",J:e+"-contour",K:t+"-mannequin"}}get spacing(){return E(this.M.I.inner.marginRight,2)}get U(){return this.o.F+"{display:block;position:absolute;z-index:50;}"+this.o.B+"{position:absolute;top:0;left:0;bottom:0;right:0;z-index:55;}"+this.o.K+"{display:none;}"+this.o.grid+"{overflow:hidden;}"+this.o.j+"{position:absolute;left:0;right:auto;bottom:auto;pointer-events:none;}"+this.o.M+"{pointer-events:auto;float:left;}"+this.o.G+"{position:absolute;z-index:100;}"+this.o.Y+"{z-index:110;}"+this.o.Z+"{position:absolute;z-index:120;}"+this.o.Z+":before{z-index:130;}"+this.o.Z+":after{z-index:140;}"+this.o.H+"{position:relative;z-index:150;}"+this.o.X+"{z-index:160;}"+this.o.D+"{position:absolute;z-index:170;}"+this.o.D+":after{z-index:190;}"+this.o.D+">*{position:relative;z-index:200;}"+this.o.J+"{display:block;position:absolute;z-index:210;pointer-events:none;}"+this.o.J+">div{display:block;position:absolute;z-index:220;}"}get V(){return this.o.F+"{"+this.N.frame.W+"}"+this.o.B+"{"+this.N.frame.inner+"}"+this.o.J+">div{"+this.N.J+"}"}get _(){let t=`{top: ${this.map.I.map.paddingTop};right: ${this.map.I.map.paddingRight};bottom: ${this.map.I.map.paddingBottom};left: ${this.map.I.map.paddingLeft};}`;return this.o.grid+"{"+`margin:${P(this.spacing,2)};`+`width: ${this.tt.width};`+`height:${this.tt.height};}`+this.o.F+t+this.o.G+t+this.o.J+t+this.o.J+"{"+`margin:${P(this.spacing,2)};}`+this.o.j+"{"+`height:${this.M.size.W.height};`+`width: ${this.et.width};}`+this.o.Z+"{"+`width:${this.M.size.W.width};`+`height:${this.M.size.W.height};}`+this.o.J+">div{display:none;top:0;left:0;"+`width:${this.M.size.it.width};`+`height:${this.M.size.it.height};}`+this.o.B+"{"+`clip-path: path('${this.st}');}`+this.rt+this.nt+this.ht}get rt(){let t="",e=this.i.ot;for(let i=e.y.min;i<=e.y.max;i++)this.i.tiles[i]&&(t+=this.o.j+`[data-elemap-y="${i}"]{`+`top:${E(i-e.y.min,this.M.size.W.height)};}`);return t}compute(){this.I={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.M.compute()}get et(){return{width:E(this.M.size.W.width,this.i.size.width),height:this.M.size.W.height}}get tt(){return{width:this.et.width,height:E(this.M.size.W.height,this.i.size.height)}}lt(t){return{top:E(t.y-this.i.ot.y.min,this.M.size.W.height),left:E(t.x-this.i.ot.x.min,this.M.size.W.width)}}ct(t){let e=this.lt(t);return{top:T(e.top,P(this.spacing,2)),left:T(e.left,P(this.spacing,2))}}get nt(){let t="";for(let e of this.i.tiles.values)for(let i of e.values)t+=this.o.M+i.o.data+"{"+`left:${this.lt(i.dt).left};}`;return t}get ft(){return{top:T(this.map.I.map.paddingTop,P(this.spacing,2)),left:T(this.map.I.map.paddingLeft,P(this.spacing,2))}}gt(){for(let t of this.i.tiles.values)for(let e of t.values)e.xt()}}class I{constructor(t){this.map=t}}class L extends I{}class M extends L{constructor(t,e){super(t.map),this.grid=e}}class Q extends M{constructor(t,e){super(t,t.grid),this.M=e}}class O extends L{constructor(t,e){super(t.map),this.content=e}}class R{constructor(t,e){this.i=t,this.map=e}}class F extends R{}class B extends F{constructor(t,e,i){super(t,e.map),this.grid=i}}class j extends B{constructor(t,e,i){super(t,e,i),this.M=i}}class G{static id(){return G.$t++}static add(t){G.vt.set(t.ids.map,t)}static content(t){let e=G.map.h(t);if(e)return e.contentById(t)}}function H(t,e){if(t&&t.hasOwnProperty(e))return t[e]}function Y(t,e,i){if(t)return t[e]=i,t}function X(t,e){for(let i of e)Y(t,i[0],i[1]);return t}function Z(t){let e={};return Y(e,"map",t.map),e}function D(t){let e={};return Y(e,"map",t.map),Y(e,"grid",t.grid),e}function J(t){return{map:H(t,"map"),grid:H(t,"grid")}}function K(t){let e={};return Y(e,"map",t.map),Y(e,"grid",t.grid),Y(e,"tile",t.M),e}function U(t){return{map:H(t,"map"),grid:H(t,"grid"),M:H(t,"tile")}}function V(t){let e={};return Y(e,"map",t.map),Y(e,"content",t.content),e}function W(t){return{map:H(t,"map"),content:H(t,"content")}}function _(t){let e={};return t&&(t.content?e=V(t):t.M&&(e=K(t))),e}function tt(t){return X({},[["outer",t.W],["inner",t.inner]])}function et(t){return{W:H(t,"outer"),inner:H(t,"inner")}}function it(t){return X({},[["frame",tt(t.frame)],["contour",t.J]])}function st(t){return{frame:et(H(t,"frame")),J:H(t,"contour")}}function rt(t){return X({},[["outer",t.W],["inner",t.inner],["hover",X({},[["outer",t.yt.W],["inner",t.yt.inner]])]])}function nt(t){return{W:H(t,"outer"),inner:H(t,"inner"),yt:{W:H(H(t,"hover"),"outer"),inner:H(H(t,"hover"),"inner")}}}function ht(t){return{grid:st(H(t,"grid")),M:nt(H(t,"tile"))}}function ot(t){return{map:et(H(t,"map")),grid:st(H(t,"grid")),M:nt(H(t,"tile"))}}function ut(t){return void 0!==H(t,"q")&&void 0!==H(t,"r")?{l:H(e=t,"q"),r:H(e,"r")}:function(t){return{x:H(t,"x"),y:H(t,"y")}}(t);var e}function lt(t){return void 0!==t.l&&void 0!==t.r?function(t){let e={};return Y(e,"q",t.l),Y(e,"r",t.r),e}(t):function(t){let e={};return Y(e,"x",t.x),Y(e,"y",t.y),e}(t)}G.$t=0,G.vt=new Map,G.map={h:t=>G.vt.get(t.map),grid:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e}},G.grid={h:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e.grid},wt:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e.grid},bt:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e.grid}},G.M={h:t=>{let e=G.grid.h(t);if(e)return e.St(t)}},G.style={map:{grid:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e.style}},grid:t=>{let e=G.map.h(t);if(e&&e instanceof wt)return e.style.grid},M:t=>{let e=G.map.h(t);if(e&&e instanceof wt&&e.style.grid&&e.style.grid instanceof A)return e.style.grid.M}};const at={W:"padding:50px;background-color:#f5df8d;",inner:""};function ct(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||"")}}const dt={frame:{W:"",inner:"background-color:#222222;"},J:"border: 2px solid transparent;background-color:#f5f5f5;"};function ft(t,e){return{frame:{W:(e&&e.frame&&e.frame.W?e.frame.W:"")+(t.frame&&t.frame.W?t.frame.W:""),inner:(e&&e.frame&&e.frame.inner?e.frame.inner:"")+(t.frame&&t.frame.inner?t.frame.inner:"")},J:(e&&e.J?e.J:"")+(t.J||"")}}const pt={W:"background-color:#222222;",inner:"width:100px;height:100px;border-radius:6px;background-color:#b2e090;margin:2px;",yt:{W:"background-color:#f5f5f5;",inner:""}};function mt(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||""),yt:{W:(e&&e.yt&&e.yt.W?e.yt.W:"")+(t.yt&&t.yt.W?t.yt.W:""),inner:(e&&e.yt&&e.yt.inner?e.yt.inner:"")+(t.yt&&t.yt.inner?t.yt.inner:"")}}}class gt{set ids(t){this.P=t}get ids(){return this.P}get grid(){return G.grid.h(this.ids)}set style(t){this.zt=t}get style(){return void 0!==this.zt?this.zt:G.style.M(this.ids)}get N(){return this.style.N}set elements(t){this.Ct=t}get elements(){return this.Ct}set coords(t){this.qt=t}get coords(){return this.qt}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){this.kt=!1,this.Tt={},"number"==typeof t.ids.M?this.ids=new Q(t.ids,t.ids.M):this.ids=new Q(t.ids,G.id()),this.coords=t.coords,t.N&&"mannequin"!==t.N&&this.updateStyle(t.N)}static Et(t,e){let i=function(t){return{ids:U(H(t,"ids")),coords:ut(H(t,"coords")),N:!!H(t,"decls")&&nt(H(t,"decls")),extensions:H(t,"extensions")}}(e),s=new t(i);return s.extend(i.extensions),s}extend(t){m(this.extensions,t)}shrink(t){w(this.extensions,t)}Pt(){return this.Nt(this.At())}At(t={}){return X(t,[["ids",K(this.ids)],["coords",lt(this.coords)],["decls",void 0!==this.zt&&rt(this.N)]]),t}Nt(t={}){return X(t,[["extensions",this.extensions]]),t}updateStyle(t,e=!1){void 0===this.zt||e?this.style=this.It(mt(t)):this.style=this.It(mt(t,this.N)),this.kt&&this.render()}Lt(){this.elements||(this.elements={inner:document.createElement("div")})}render(){if(this.style.K&&this.style.i===this)this.Mt();else{let t=this.grid.elements.Qt[o(this.dt)],e=this.grid.elements.Ot[o(this.dt)];this.Lt(),this.Rt(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W)),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}this.kt=!0}Mt(){let t=this.grid.elements.K.Y,e=this.grid.elements.K.X;this.elements||(this.elements={inner:document.createElement("div"),W:document.createElement("div")}),this.elements.W.classList.add("elemap-"+this.ids.map+"-mannequin"),this.elements.inner.classList.add("elemap-"+this.ids.map+"-mannequin"),t.contains(this.elements.W)||t.appendChild(this.elements.W),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}xt(){if(void 0!==this.zt&&!this.style.K){if(!this.elements.style){let t=document.head.getElementsByTagName("style");for(let e of t)e.classList.contains("elemap-"+this.ids.map+"-css-tile-"+this.ids.M)&&(this.elements.style=e);this.elements.style||(this.elements.style=document.createElement("style"),this.elements.style.classList.add("elemap-"+this.ids.map+"-css-tile-"+this.ids.M),document.head.appendChild(this.elements.style))}if(!this.elements.W&&(this.N.W.length||this.N.yt.W.length)){this.elements.W=document.createElement("div");let t=this.grid.elements.Qt[o(this.dt)];this.Rt(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W))}}this.elements.style&&(this.elements.style.innerHTML=this.style.U+this.style.V+this.style._)}yt(){let t=G.grid.h(this.ids);t&&t.Ft(this.Bt)}jt(){let t=G.grid.h(this.ids);t&&t.Ft(!1)}get Bt(){let t=G.grid.h(this.ids);if(t){let e=this.elements.inner,i={x:0,y:0};for(;e;)if(i.x+=e.offsetLeft,i.y+=e.offsetTop,e=e.parentElement,e===t.elements.inner)return{x:i.x-S(t.style.spacing),y:i.y-S(t.style.spacing)}}return{x:0,y:0}}}class xt{set ids(t){this.P=t}get ids(){return this.P}get map(){return G.map.h(this.ids)}set Gt(t){this.Ht=t}get Gt(){return this.Ht}set location(t){this.Yt=t}get location(){return this.Yt}get host(){return this.Yt.content?G.content(this.Yt):this.Yt.M?G.M.h(this.Yt):void 0}set offset(t){this.Xt=t}get offset(){return this.Xt}set elements(t){this.Ct=t}get elements(){return this.Ct}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){this.Yt=void 0,this.Tt={},"number"==typeof t.ids.content?this.ids=new O(t.ids,t.ids.content):this.ids=new O(t.ids,G.id()),"string"==typeof t.Gt?this.Gt=t.Gt:this.Gt=b(t.Gt),this.location=t.location,this.offset=t.offset}static import(t){let e=function(t){return{ids:W(H(t,"ids")),Gt:H(t,"figure"),location:(e=H(t,"location"),e?H(e,"content")?W(e):H(e,"tile")?U(e):void 0:void 0),offset:H(t,"offset"),extensions:H(t,"extensions")};var e}(t),i=new xt(e);return i.extend(e.extensions),i}extend(t){m(this.extensions,t)}shrink(t){w(this.extensions,t)}export(){return this.Nt(this.At())}At(t={}){return X(t,[["ids",V(this.ids)],["figure",this.elements.Gt.outerHTML],["location",this.location?_(this.location):void 0],["offset",this.offset]]),t}Nt(t={}){return X(t,[["extensions",this.extensions]]),t}yt(){this.host&&"function"==typeof this.host.yt&&this.host.yt()}jt(){this.host&&"function"==typeof this.host.jt&&this.host.jt()}Lt(){if(this.elements)return;let t;try{t=document.querySelector(this.Gt)}catch(t){}if(!t){let e=document.createElement("div");e.innerHTML=this.Gt,t=e.children[0]}this.elements={Gt:t,container:document.createElement("div")}}render(){if(this.Lt(),this.host&&this.host instanceof gt){let t=this.host.style.grid.ft,e=this.host.style.grid.ct(this.host.dt),i=this.host.style.size.inner;this.elements.container.style.top=T(t.top,e.top,this.offset.top,P(i.height,2)),this.elements.container.style.left=T(t.left,e.left,this.offset.top,P(i.width,2))}this.elements.container.contains(this.elements.Gt)||this.elements.container.appendChild(this.elements.Gt),this.map.elements.content.contains(this.elements.container)||this.map.elements.content.appendChild(this.elements.container)}}class $t{constructor(t){this.Zt=t}get ids(){return V(this.Zt.ids)}extend(t){return this.Zt.extend(y(t))}shrink(t){return this.Zt.shrink(t)}get extensions(){return this.Zt.extensions}}class vt{constructor(t){this.Zt=t}get ids(){return K(this.Zt.ids)}get coords(){return lt(this.Zt.coords)}export(){return this.Zt.export()}get extensions(){return this.Zt.extensions}extend(t){return this.Zt.extend(y(t))}shrink(t){return this.Zt.shrink(t)}updateStyle(t,e=!1){this.Zt.updateStyle(nt(t),e)}get elements(){let t={};return X(t,[["outer",this.Zt.elements.W||void 0],["inner",this.Zt.elements.inner||void 0]]),t}}class yt{set ids(t){this.P=t}get ids(){return this.P}set elements(t){this.Ct=t}get elements(){return this.Ct}set style(t){this.zt=t}get style(){return this.zt}get Dt(){return{u:`elemap-${this.ids.map}`,container:`elemap-${this.ids.map}-container`,map:`elemap-${this.ids.map}-map`}}set extensions(t){this.Tt=t}get extensions(){return this.Tt}set contents(t){this.Jt=t}get contents(){return this.Jt}constructor(t){this.Tt={},this.Jt=[],t.ids&&"number"==typeof t.ids.map?this.ids=new L(t.ids.map):this.ids=new L(G.id()),G.add(this),t.contents&&this.Kt(t.contents)}Pt(){return this.Nt(this.At())}At(t={}){return X(t,[["type",this.Ut()],["ids",Z(this.ids)],["contents",this.contents.map((t=>t.export()))]]),t}Nt(t={}){return X(t,[["extensions",this.extensions]]),t}Kt(t){for(let e of t)this.contents.push(xt.import(e))}Lt(){if(this.elements&&this.elements.map)return this.elements;{let t=document.createElement("div");t.classList.add(`elemap-${this.ids.map}-map`);let e=document.createElement("div");return e.classList.add(`elemap-${this.ids.map}-content`),{map:t,content:e}}}Vt(t){if(t&&this.elements.container!==t&&(this.elements.container=t,this.elements.container.innerHTML="",this.elements.container.classList.add("elemap-"+this.ids.map+"-container")),!this.elements.container)throw new Error("No container found.");for(let t of document.getElementsByClassName("elemap-"+this.ids.map+"-container"))t!==this.elements.container&&t.classList.remove("elemap-"+this.ids.map+"-container");this.elements.container.appendChild(this.elements.map),this.elements.container.appendChild(this.elements.content)}render(t){this.elements=this.Lt(),this.Vt(t),this.style.render();for(let t of this.contents)t.render()}contentById(t){for(let e of this.contents)if(e.ids.content===t.content)return e}contentByElement(t){for(let e of this.contents)if(e.elements.Gt===t)return e}addContent(t){let e;e=(t=function(t){return{Gt:H(t,"figure"),location:H(t,"location"),offset:H(t,"offset")}}(t)).location?t.location instanceof $t||t.location instanceof vt?t.location.ids:this.grid.tileByCoords(t.location).ids:void 0;let i=new xt({ids:this.ids,location:e,Gt:t.Gt,offset:t.offset||{top:"0",right:"0",bottom:"0",left:"0"}});return this.contents.push(i),new $t(i)}deleteContent(t){for(let e=0;e<this.contents.length;e++)this.contents[e].ids.content===t.content&&this.contents.splice(e,1)}}class wt extends yt{set style(t){this.zt=t}get style(){return this.zt}get V(){return{map:this.style.N,grid:this.style.grid.N,M:this.style.grid.M.N}}constructor(t,e){super(t),t.grid.ids&&"number"==typeof t.grid.ids.grid?this.grid=e.import(t.grid):this.grid=new e(Object.assign(t.grid,{ids:this.ids})),this.Wt(t.V),t.grid.tiles&&this.grid._t(function(t){let e=new x;if(p(t))for(const i in t)e[Number(i)]=$(t[i]);return e}(t.grid.tiles))}static Et(t,e){let i=new t(e);return i.extend(e.extensions),i}extend(t){m(this.extensions,t)}shrink(t){w(this.extensions,t)}At(t={}){var e;return X(t,[["type",this.Ut()],["ids",Z(this.ids)],["grid",this.grid.export()],["schema",(e=this.V,X({},[["map",tt(e.map)],["grid",it(e.grid)],["tile",rt(e.M)]]))],["contents",this.contents.map((t=>t.export()))]]),t}Nt(t={}){return X(t,[["extensions",this.extensions]]),t}render(t){this.elements=this.Lt(),this.Vt(t),this.grid.render(this.elements.map),this.style.render();for(let t of this.contents)t.render()}}class bt{set ids(t){this.P=t}get ids(){return this.P}get size(){return{width:this.ot.x.max-this.ot.x.min+1,height:this.ot.y.max-this.ot.y.min+1}}get ot(){let t,e,i,s;for(let r of this.tiles.keys){(void 0===t||r<t)&&(t=r),(void 0===e||r>e)&&(e=r);for(let t of this.tiles[r].keys)(void 0===i||t<i)&&(i=t),(void 0===s||t>s)&&(s=t)}return{x:{min:i||0,max:s||0},y:{min:t||0,max:e||0}}}St(t){if(this.K.ids.M===t.M)return this.K;for(let e in this.tiles)for(let i in this.tiles[e])if(this.tiles[e][i].ids.M===t.M)return this.tiles[e][i]}get style(){return G.map.grid(this.ids).style.grid}get V(){return{grid:this.style.N,M:this.style.M.N}}get Dt(){let t=`elemap-${this.ids.map}`;return{u:t,frame:t+"-frame",F:t+"-frame-outer",B:t+"-frame-inner",grid:t+"-grid",G:t+"-outer",H:t+"-inner",J:t+"-contour"}}get o(){return this.style.o}set orientation(t){this.te=t}get orientation(){return this.te}set offset(t){this.Xt=t}get offset(){return this.Xt}set elements(t){this.Ct=t}get elements(){return this.Ct}set extensions(t){this.Tt=t}get extensions(){return this.Tt}constructor(t){this.tiles=new x,this.Tt={},"number"==typeof t.ids.grid?this.ids=new M(t.ids,t.ids.grid):this.ids=new M(t.ids,G.id()),this.orientation=t.orientation,this.offset=t.offset}static Et(t,e){let i=new t(e);return i.extend(e.extensions),i}extend(t){m(this.extensions,t)}shrink(t){w(this.extensions,t)}Pt(){return this.Nt(this.At())}At(t={}){let e=new g;for(let[t,i]of this.tiles){e[t]=new g;for(let[s,r]of i)e[t][s]=r.export()}var i;return X(t,[["ids",D(this.ids)],["orientation",this.orientation],["offset",this.offset],["schema",(i=this.V,X({},[["grid",it(i.grid)],["tile",rt(i.M)]]))],["tiles",e]]),t}Nt(t={}){return X(t,[["extensions",this.extensions]]),t}_t(t){for(let[e,i]of t)for(let[t,s]of i)this.tiles[e]||(this.tiles[e]=new g),this.tiles[e][t]=this.ee(s)}Lt(){this.elements||(this.elements={F:document.createElement("div"),B:document.createElement("div"),W:document.createElement("div"),inner:document.createElement("div"),Qt:new g,Ot:new g,J:document.createElement("div"),ut:document.createElement("div"),K:{Y:document.createElement("div"),Z:document.createElement("div"),X:document.createElement("div"),D:document.createElement("div")}},this.elements.F.classList.add("elemap-"+this.ids.map+"-grid-frame-outer"),this.elements.B.classList.add("elemap-"+this.ids.map+"-grid-frame-inner"),this.elements.F.appendChild(this.elements.B),this.elements.W.classList.add("elemap-"+this.ids.map+"-grid"),this.elements.W.classList.add("elemap-"+this.ids.map+"-grid-outer"),this.elements.inner.classList.add("elemap-"+this.ids.map+"-grid"),this.elements.inner.classList.add("elemap-"+this.ids.map+"-grid-inner"),this.elements.J.classList.add("elemap-"+this.ids.map+"-grid-contour"),this.elements.J.appendChild(this.elements.ut),this.elements.K.Y.classList.add("elemap-"+this.ids.map+"-mannequin"),this.elements.W.appendChild(this.elements.K.Y),this.elements.K.X.classList.add("elemap-"+this.ids.map+"-mannequin"),this.elements.inner.appendChild(this.elements.K.X),this.style.M.i.render())}render(t){this.Lt(),t.innerHTML="";for(let t in this.elements.Qt)for(let e of this.elements.Qt[t].children)this.ie(e)||this.elements.Qt[t].removeChild(e);for(let t in this.elements.Ot)for(let e of this.elements.Ot[t].children)this.ie(e)||this.elements.Ot[t].removeChild(e);for(let[t,e]of this.tiles){void 0===this.elements.Qt[t]&&(this.elements.Qt[t]=document.createElement("div"),Y(this.elements.Qt[t].dataset,"elemapY",t.toString()),this.elements.W.appendChild(this.elements.Qt[t])),void 0===this.elements.Ot[t]&&(this.elements.Ot[t]=document.createElement("div"),Y(this.elements.Ot[t].dataset,"elemapY",t.toString()),this.elements.inner.appendChild(this.elements.Ot[t]));for(let t of e.values)t.render()}t.appendChild(this.elements.F),t.appendChild(this.elements.W),t.appendChild(this.elements.inner),t.appendChild(this.elements.J),this.elements.inner.addEventListener("mouseover",(t=>{let e=t.target.closest(this.o.D);e&&this.ie(e).yt()})),this.elements.inner.addEventListener("mouseout",(t=>{let e=t.target.closest(this.o.D);e&&this.ie(e).jt()}))}Ft(t){!1===t?this.elements.ut.removeAttribute("style"):(this.elements.ut.style.display="block",this.elements.ut.style.transform=`translate(${t.x}px, ${t.y}px)`)}}class St extends i{set ids(t){this.P=t}get ids(){return this.P}get i(){return G.M.h(this.ids.i)}get grid(){return G.style.grid(this.ids.i)}get spacing(){return this.grid.spacing}set I(t){this.L=t}get I(){return this.L||this.compute(),this.L}get o(){return Object.assign(Object.assign({},this.grid.o),{data:this.K?"":this.i.o.data})}set N(t){this.A=t}get N(){return this.A}constructor(t,e,i,s=!1){super(),this.ids=new j(t,e,G.id()),this.K=s,this.N=i}get size(){let t={width:this.I.inner.width,height:this.I.inner.height};return{it:{width:T(t.width,E(this.spacing,2)),height:T(t.height,E(this.spacing,2))},W:{width:T(t.width,this.spacing),height:T(t.height,this.spacing)},inner:t}}get U(){return""}get V(){let t="";return this.N.W.length&&(t+=this.o.Z+this.o.data+"{"+this.N.W+"}"),this.N.inner.length&&(t+=this.o.D+this.o.data+"{"+this.N.inner+"}"),this.N.yt.W.length&&(t+=this.o.Z+this.o.data+":hover{"+this.N.yt.W+"}"),this.N.yt.inner.length&&(t+=this.o.D+this.o.data+":hover{"+this.N.yt.inner+"}"),t}get _(){return""}compute(){this.I={inner:getComputedStyle(this.i.elements.inner)}}get se(){return this.grid.lt(this.i.dt)}get re(){return this.grid.ct(this.i.dt)}}class zt extends St{}class Ct extends gt{constructor(t){super(t)}get dt(){return this.coords}static import(t){return this.Et(Ct,t)}export(){return this.Pt()}set style(t){this.zt=t}get style(){return void 0!==this.zt?this.zt:G.style.M(this.ids)}It(t){return new zt(this.ids,this.grid.style.ids,t)}Rt(){this.elements.W&&(Y(this.elements.W.dataset,"elemapX",this.coords.x.toString()),Y(this.elements.W.dataset,"elemapY",this.coords.y.toString())),Y(this.elements.inner.dataset,"elemapX",this.coords.x.toString()),Y(this.elements.inner.dataset,"elemapY",this.coords.y.toString())}get o(){return{data:`[data-elemap-x="${this.coords.x}"][data-elemap-y="${this.coords.y}"]`}}}class qt extends bt{constructor(t){super(t)}static import(t){return this.Et(qt,t)}export(){return this.Pt()}ne(t){return new Ct(t)}ee(t){return Ct.import(t)}he(t){return t}createTile(t,e){return Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.tiles[t.y]||(this.tiles[t.y]=new g),!(!e&&this.tiles[t.y][t.x])&&(this.tiles[t.y][t.x]=this.ne({ids:this.ids,coords:this.he(t),N:!1}),t)}createTiles(t,e,i){let s=[];Array.isArray(e)&&(e={x:e[0],y:e[1]});for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.createTile({x:r,y:n},i));return s}tileByCoords(t){if(Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.tiles[t.y]&&this.tiles[t.y][t.x])return this.tiles[t.y][t.x]}ie(t){if(t.hasAttribute("data-elemap-x")&&t.hasAttribute("data-elemap-y")){let e=this.tileByCoords({x:Number(t.getAttribute("data-elemap-x")),y:Number(t.getAttribute("data-elemap-y"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}}class Tt extends i{set ids(t){this.P=t}get ids(){return this.P}set N(t){this.A=t}get N(){return this.A}set elements(t){this.Ct=t}get elements(){return this.Ct}set I(t){this.L=t}get I(){return this.L}constructor(t,e){super(),this.ids=new F(t,G.id()),this.N=e.map}export(){return X(this.N,[["outer",this.N.W],["inner",this.N.inner]])}Lt(){let t,e,i,s=document.head.getElementsByTagName("style");for(let r of s)r.classList.contains(this.i.Dt.u+"-css-core")?t=r:r.classList.contains(this.i.Dt.u+"-css-schema")?e=r:r.classList.contains(this.i.Dt.u+"-css-generated")&&(i=r);return t||(t=document.createElement("style"),t.classList.add(this.i.Dt.u+"-css-core"),document.head.appendChild(t)),e||(e=document.createElement("style"),e.classList.add(this.i.Dt.u+"-css-schema"),document.head.appendChild(e)),i||(i=document.createElement("style"),i.classList.add(this.i.Dt.u+"-css-generated"),document.head.appendChild(i)),{U:t,V:e,_:i}}render(){this.elements=this.Lt(),this.elements.U.innerHTML=this.U,this.elements.V.innerHTML=this.V,this.i.elements.map.offsetHeight,this.compute(),this.elements._.innerHTML=this._}get o(){return{u:`.elemap-${this.ids.i.map}`,container:`.elemap-${this.ids.i.map}-container`,map:`.elemap-${this.ids.i.map}-map`,content:`.elemap-${this.ids.i.map}-content`}}get U(){return this.o.container+"{width:max-content;position:relative;}"+this.o.map+"{position:relative;width:max-content;z-index:10;display: flex;}"+this.o.content+"{position:absolute;z-index:500;top:0;left:0;bottom:0;right:0;pointer-events:none;}"+this.o.content+">div{width: 0px;height: 0px;position: absolute;overflow:visible}"+this.o.content+">div>*{position: absolute;transform: translate(-50%, -100%);}"}get V(){return this.o.map+"{"+this.N.W+"}"+this.o.map+">*{"+this.N.inner+"}"}compute(){this.I={map:getComputedStyle(this.i.elements.map)}}get _(){return""}}class kt extends Tt{set grid(t){this.oe=t}get grid(){return this.oe}get i(){return G.map.grid(this.ids.i)}constructor(t,e){super(t,e),this.ue(e)}render(){this.elements=this.Lt(),this.elements.U.innerHTML=this.U+this.grid.U+this.grid.M.U,this.elements.V.innerHTML=this.V+this.grid.V+this.grid.M.V,this.i.elements.map.offsetHeight,this.i.grid.elements.inner.offsetHeight,this.compute(),this.elements._.innerHTML=this._+this.grid._+this.grid.M._,this.grid.gt();let t=document.head.getElementsByTagName("style"),e=Array.from(t);for(let t of e)for(let e of t.classList)if(e.startsWith(this.i.Dt.u+"-css-")){let e=!1;if(t!==this.elements.U&&t!==this.elements.V&&t!==this.elements._||(e=!0),!e)for(let i of this.grid.i.tiles.values){for(let s of i.values)if(t===s.elements.style){e=!0;break}if(e)break}e||t.remove()}}compute(){this.I={map:getComputedStyle(this.i.elements.map)},this.grid.compute()}}class Et extends A{get i(){return G.grid.wt(this.ids.i)}set M(t){this.O=t}get M(){return this.O}R(t){this.i.K=new Ct({ids:this.i.ids,coords:{x:0,y:0},N:"mannequin"}),this.M=new zt(this.i.K.ids,this.ids,t,!0)}get ht(){let t=u(S(this.I.ut.borderWidth),0)+"px",e={width:k(this.M.size.it.width,E(t,2)),height:k(this.M.size.it.height,E(t,2))},i=c(this.M.size.it,S(this.M.I.inner.borderRadius)),s=c(e,S(this.M.I.inner.borderRadius),{top:S(t),left:S(t)});return this.o.J+">div{"+`clip-path:path(evenodd,'${i} ${s}');}`}get st(){let t="",e=this.i.ot;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.tiles[i]||!this.i.tiles[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=c(this.M.size.it,S(this.M.I.inner.borderRadius),{top:S(e.top),left:S(e.left)})}return t}}class Pt extends kt{ue(t){this.grid=new Et(this.i.grid.ids,this.ids,t)}}class Nt extends wt{constructor(t){super(t,qt)}static import(t){return this.Et(Nt,t)}export(){return this.Pt()}Ut(){return`${s.p}`}Wt(t){this.style=new Pt(this.ids,t)}}class At extends St{}class It extends gt{constructor(t){super(t)}get dt(){let t=f(this.coords,this.grid.orientation,this.grid.offset);return{x:t.x,y:t.y}}static import(t){return this.Et(It,t)}export(){return this.Pt()}set style(t){this.zt=t}get style(){return void 0!==this.zt?this.zt:G.style.M(this.ids)}It(t){return new At(this.ids,this.grid.style.ids,t)}Rt(){this.elements.W&&(Y(this.elements.W.dataset,"elemapR",this.coords.r.toString()),Y(this.elements.W.dataset,"elemapQ",this.coords.l.toString())),Y(this.elements.inner.dataset,"elemapR",this.coords.r.toString()),Y(this.elements.inner.dataset,"elemapQ",this.coords.l.toString()),this.elements.W&&(Y(this.elements.W.dataset,"elemapX",this.dt.x.toString()),Y(this.elements.W.dataset,"elemapY",this.dt.y.toString())),Y(this.elements.inner.dataset,"elemapX",this.dt.x.toString()),Y(this.elements.inner.dataset,"elemapY",this.dt.y.toString())}get o(){return{data:`[data-elemap-r="${this.coords.r}"][data-elemap-q="${this.coords.l}"]`}}}class Lt extends bt{constructor(t){super(t)}static import(t){return this.Et(Lt,t)}export(){return this.Pt()}ne(t){return new It(t)}ee(t){return It.import(t)}he(t){return d(t,this.orientation,this.offset)}tileByCoords(t){Array.isArray(t)&&(t={l:t[0],r:t[1]});let e=h(t)?t:f(t,this.orientation,this.offset);if(this.tiles[e.y]&&this.tiles[e.y][e.x])return this.tiles[e.y][e.x]}ie(t){if(t.hasAttribute("data-elemap-r")&&t.hasAttribute("data-elemap-q")){let e=this.tileByCoords({l:Number(t.getAttribute("data-elemap-q")),r:Number(t.getAttribute("data-elemap-r"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}createTile(t,e){Array.isArray(t)&&(t={l:t[0],r:t[1]});let i=h(t)?t:f(t,this.orientation,this.offset);return this.tiles[i.y]||(this.tiles[i.y]=new g),!(!e&&this.tiles[i.y][i.x])&&(this.tiles[i.y][i.x]=this.ne({ids:this.ids,coords:this.he(i),N:!1}),t)}createTiles(t,e,i){let s=[];if(Array.isArray(e)&&(e={l:e[0],r:e[1]}),h(e))for(let r=e.x;r<e.x+t.width;r++)for(let n=e.y;n<e.y+t.height;n++)s.push(this.createTile(d({x:r,y:n},this.orientation,this.offset),i));else for(let r=e.l;r<e.l+t.width;r++)for(let n=e.r;n<e.r+t.height;n++)s.push(this.createTile({l:r,r:n},i));return s}le(t){return this.offset===n.S?t%2!=0:t%2==0}}class Mt extends A{get i(){return G.grid.bt(this.ids.i)}set M(t){this.O=t}get M(){return this.O}R(t){this.i.K=new It({ids:this.i.ids,coords:{l:0,r:0},N:"mannequin"}),this.M=new At(this.i.K.ids,this.ids,t,!0)}get ae(){return this.i.orientation===r.$?{it:{q:P(this.M.size.it.height,2),k:this.M.size.it.height,T:this.M.size.it.width},W:{q:P(this.M.size.W.height,2),k:this.M.size.W.height,T:this.M.size.W.width},inner:{q:P(this.M.size.inner.height,2),k:this.M.size.inner.height,T:this.M.size.inner.width}}:{it:{q:P(this.M.size.it.width,2),k:this.M.size.it.width,T:this.M.size.it.height},W:{q:P(this.M.size.W.width,2),k:this.M.size.W.width,T:this.M.size.W.height},inner:{q:P(this.M.size.inner.width,2),k:this.M.size.inner.width,T:this.M.size.inner.height}}}compute(){this.I={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.M.compute(),this.ce(),this.M.compute()}ce(){let t,e;this.i.orientation===r.$?(e=k(this.M.size.W.height,this.M.size.inner.height),t=N(E(this.M.size.inner.width,l),0),this.map.elements.V.innerHTML+=this.o.Z+"{height:"+T(t,e)+"}"+this.o.D+"{height:"+t+"}"):(e=k(this.M.size.W.width,this.M.size.inner.width),t=N(E(this.M.size.inner.height,l),0),this.map.elements.V.innerHTML+=this.o.Z+"{width:"+T(t,e)+"}"+this.o.D+"{width:"+t+"}")}get st(){let t="",e=this.i.ot;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.tiles[i]||!this.i.tiles[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=a(this.i.orientation,this.ae.it,S(this.M.I.inner.borderRadius),{top:S(e.top),left:S(e.left)})}return t}get ht(){let t=u(S(this.I.ut.borderWidth),0)+"px",e=k(this.ae.it.k,E(t,2)),i={q:P(e,2),k:e,T:k(this.ae.it.T,E(t,2))},s=a(this.i.orientation,this.ae.it,S(this.M.I.inner.borderRadius)),r=a(this.i.orientation,i,S(this.M.I.inner.borderRadius),{top:S(t),left:S(t)});return this.o.D+"{"+`clip-path:path('${a(this.i.orientation,this.ae.inner,S(this.M.I.inner.borderRadius))}');}`+this.o.Z+"{"+`clip-path:path('${a(this.i.orientation,this.ae.W,0)}');}`+this.o.J+">div{"+`clip-path:path(evenodd,'${s} ${r}');}`+this.de()}get fe(){return this.i.orientation===r.$?{vertical:P(this.M.size.W.height,4),pe:"0px"}:{vertical:"0px",pe:P(this.M.size.W.width,4)}}me(){let t=!1,e=!1;for(let i of this.i.tiles.values){for(let s of i.values)this.ge(s.dt)?t=!0:e=!0;if(t&&e)break}return t&&e}xe(){let t=this.i.ot;for(let e of this.i.tiles.values)for(let i of e.values)if(!this.ge(i.dt)){if(this.i.orientation===r.$&&i.dt.x===t.x.min)return!0;if(this.i.orientation===r.v&&i.dt.y===t.y.min)return!0}return!1}$e(){let t=this.i.ot;for(let e of this.i.tiles.values)for(let i of e.values)if(this.ge(i.dt)){if(this.i.orientation===r.$&&i.dt.x===t.x.max)return!0;if(this.i.orientation===r.v&&i.dt.y===t.y.max)return!0}return!1}ge(t){return this.i.orientation===r.$?"even"===this.i.offset&&t.y%2==0||"odd"===this.i.offset&&t.y%2!=0:"even"===this.i.offset&&t.x%2==0||"odd"===this.i.offset&&t.x%2!=0}ve(t){let e={vertical:"0px",pe:"0px"};return this.me()?(this.i.orientation===r.$?this.xe()?this.ge(t)&&(e.pe=this.ye.pe):this.ge(t)||(e.pe=k(0,this.ye.pe)):this.xe()?this.ge(t)&&(e.vertical=this.ye.vertical):this.ge(t)||(e.vertical=k(0,this.ye.vertical)),e):e}de(){let t="";if(!this.me())return t;let e=this.i.ot;if(this.i.orientation===r.$)for(let i=e.y.min;i<=e.y.max;i++)t+=this.o.j+`[data-elemap-y="${i}"]{`+`left:${this.ve({x:e.x.min,y:i}).pe};}`;else for(let i=e.x.min;i<=e.x.max;i++)t+=this.o.M+`[data-elemap-x="${i}"]{`+`top:${this.ve({x:i,y:e.y.min}).vertical};}`;return t}get ye(){return this.i.orientation===r.$?{vertical:"0px",pe:P(this.M.size.W.width,2)}:{vertical:P(this.M.size.W.height,2),pe:"0px"}}get rt(){let t="",e=this.i.ot;for(let i=e.y.min;i<=e.y.max;i++)this.i.tiles[i]&&(t+=this.o.j+`[data-elemap-y="${i}"]{`+`top:${k(E(i-e.y.min,this.M.size.W.height),E(this.fe.vertical,i-e.y.min))};}`);return t}get et(){return{width:k(E(this.M.size.W.width,this.i.size.width),E(this.fe.pe,this.i.size.width-1)),height:this.M.size.W.height}}get tt(){let t=this.et.width;this.i.orientation===r.$&&this.me()&&(this.xe()&&this.$e()?t=T(t,this.ye.pe):this.xe()||this.$e()||(t=k(t,this.ye.pe)));let e=k(E(this.M.size.W.height,this.i.size.height),E(this.fe.vertical,this.i.size.height-1));return this.i.orientation===r.v&&this.me()&&(this.xe()&&this.$e()?e=T(e,this.ye.vertical):this.xe()||this.$e()||(e=k(e,this.ye.vertical))),{width:t,height:e}}lt(t){let e=t.x-this.i.ot.x.min,i=t.y-this.i.ot.y.min,s=k(this.M.size.W.height,this.fe.vertical),r=k(this.M.size.W.width,this.fe.pe);return{top:T(E(i,s),this.ve(t).vertical),left:T(E(e,r),this.ve(t).pe)}}ct(t){let e=this.lt(t);return{top:T(e.top,P(this.spacing,2)),left:T(e.left,P(this.spacing,2))}}get nt(){let t="";for(let e of this.i.tiles.values)for(let i of e.values)t+=this.o.M+i.o.data+"{"+`left:${k(this.lt(i.dt).left,this.ve(i.dt).pe)};}`;return t}}class Qt extends kt{ue(t){this.grid=new Mt(this.i.grid.ids,this.ids,t)}}class Ot extends wt{constructor(t){super(t,Lt)}static import(t){return this.Et(Ot,t)}export(){return this.Pt()}Ut(){return`${s.m}`}Wt(t){this.style=new Qt(this.ids,t)}}function Rt(t){let e=H(t,"grid");return{ids:(s=H(t,"ids"),{map:H(s,"map")}),grid:{ids:J(H(e,"ids")),orientation:H(e,"orientation")||r.$,offset:H(e,"offset")||n.S,V:ht(H(e,"schema")),tiles:H(e,"tiles")},V:(i=ot(H(t,"schema"))||{},{map:ct(i.map||{},at),grid:ft(i.grid||{},dt),M:mt(i.M||{},pt)}),contents:H(t,"contents")||[]};var i,s}class Ft{constructor(t){this.Zt=t}get ids(){return D(this.Zt.ids)}export(){return this.Zt.export()}get extensions(){return this.Zt.extensions}extend(t){return this.Zt.extend(y(t))}shrink(t){return this.Zt.shrink(t)}tileByCoords(t){let e=this.Zt.tileByCoords(Array.isArray(t)?t:ut(t));if(e)return new vt(e)}createTile(t,e=!1){let i=this.Zt.createTile(t,e);return i&&this.tileByCoords(i)||!1}createTiles(t,e,i=!1){let s=this.Zt.createTiles(t,e,i),r=[];for(let t of s)t?r.push(this.tileByCoords(t)||!1):r.push(!1);return r}get tiles(){let t=new x;for(let[e,i]of this.Zt.tiles){t[e]=new g;for(let[s,r]of i)t[e][s]=new vt(r)}return t}}class Bt{constructor(t,e){let i=t===s.p?s.p:t===s.m?s.m:s.p;i===s.p?this.Zt=new Nt(Rt(e||{})):i===s.m&&(this.Zt=new Ot(Rt(e||{})))}get ids(){return Z(this.Zt.ids)}static import(t){return new Bt(t.type,t)}export(){return this.Zt.export()}get extensions(){return this.Zt.extensions}extend(t){return this.Zt.extend(y(t))}shrink(t){return this.Zt.shrink(t)}render(t){this.Zt.render(t)}get grid(){let t=this.Zt.grid;if(t)return new Ft(t)}addContent(t){return this.Zt.addContent(t)}deleteContent(t){return this.Zt.deleteContent(t)}contentById(t){let e=this.Zt.contentById(t);if(e)return new $t(e)}contentByElement(t){let e=this.Zt.contentByElement(t);if(e)return new $t(e)}get contents(){let t=[];for(let e of this.Zt.contents)t.push(new $t(e));return t}static get we(){return{p:s.p,m:s.m}}static get be(){return{$:r.$,v:r.v}}static get Se(){return{S:n.S,C:n.C}}}const jt=Bt})(),Elemap=e.default})();