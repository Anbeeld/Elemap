var Elemap;(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.t(i,s)&&!t.t(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},t:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{t.d(e,{default:()=>Qt});class i{constructor(){}get i(){return L.map.h(this.o.i)}get u(){return{l:`.elemap-${this.o.i.map}`}}}var s,r,h;function n(t){return void 0!==t.x&&void 0!==t.y}function o(t){return void 0!==t.p&&void 0!==t.r?t.p:t.y}function u(t,e){return parseFloat(t.toFixed(e))}!function(t){t.m="rectangle",t.$="hexagon"}(s||(s={})),function(t){t.v="pointy",t._="flat"}(r||(r={})),function(t){t.C="odd",t.S="even"}(h||(h={}));const l=2/Math.sqrt(3);function a(t,e,i=0,s={top:0,left:0}){const h=Math.sin(30*Math.PI/180);const n=Math.cos(30*Math.PI/180),o=v(e.T),l=v(e.q)/(o*n*2),a=v(e.I)/(2*o);let d=0,c=0,f=u(o*n*l,2),p=u(o*h*a,2),m=u(f-i*n*l,2),g=u(i*h*a,2),$=u(f+i*n*l,2),x=u(2*f,2),y=u(p+o,2),w=u(x-i*n*l,2),_=u(p-i*h*a,2),b=u(p+i*a,2),C=u(y+p,2),S=u(y-i*a,2),z=u(y+i*h*a,2),T=u(C-i*h*a,2),q=u(i*n*l,2);if(t===r.v)return d=u(d+s.left,2),f=u(f+s.left,2),m=u(m+s.left,2),$=u($+s.left,2),x=u(x+s.left,2),w=u(w+s.left,2),q=u(q+s.left,2),c=u(c+s.top,2),p=u(p+s.top,2),g=u(g+s.top,2),_=u(_+s.top,2),b=u(b+s.top,2),y=u(y+s.top,2),S=u(S+s.top,2),z=u(z+s.top,2),C=u(C+s.top,2),T=u(T+s.top,2),`M ${m},${g}Q ${f},${c} ${$},${g} L ${w},${_}Q ${x},${p} ${x},${b} L ${x},${S}Q ${x},${y} ${w},${z} L ${$},${T}Q ${f},${C} ${m},${T} L ${q},${z}Q ${d},${y} ${d},${S} L ${d},${b}Q ${d},${p} ${q},${_} Z`;if(t===r._)return d=u(d+s.top,2),f=u(f+s.top,2),m=u(m+s.top,2),$=u($+s.top,2),x=u(x+s.top,2),w=u(w+s.top,2),q=u(q+s.top,2),c=u(c+s.left,2),p=u(p+s.left,2),g=u(g+s.left,2),_=u(_+s.left,2),b=u(b+s.left,2),y=u(y+s.left,2),S=u(S+s.left,2),z=u(z+s.left,2),C=u(C+s.left,2),T=u(T+s.left,2),`M ${g},${m}Q ${c},${f} ${g},${$} L ${_},${w}Q ${p},${x} ${b},${x} L ${S},${x}Q ${y},${x} ${z},${w} L ${T},${$}Q ${C},${f} ${T},${m} L ${z},${q}Q ${y},${d} ${S},${d} L ${b},${d}Q ${p},${d} ${_},${q} Z`;throw new Error("Invalid hexagon type")}function d(t,e=0,i={top:0,left:0}){let s=0,r=0,h=s+e,n=r+e,o=v(t.width),l=o-e,a=v(t.height),d=a-e;return s=u(s+i.left,2),o=u(o+i.left,2),l=u(l+i.left,2),h=u(h+i.left,2),r=u(r+i.top,2),a=u(a+i.top,2),n=u(n+i.top,2),d=u(d+i.top,2),`M ${s},${n}A ${e},${e} 0 0 1 ${h},${r} L ${l},${r}A ${e},${e} 0 0 1 ${o},${n} L ${o},${d}A ${e},${e} 0 0 1 ${l},${a} L ${h},${a}A ${e},${e} 0 0 1 ${s},${d} Z`}function c(t,e,i){let s={r:0,p:0};return e===r.v?(s.r=t.y,i===h.C?s.p=t.x-(t.y-(1&t.y))/2:s.p=t.x-(t.y+(1&t.y))/2):(s.p=t.x,i===h.C?s.r=t.y-(t.x-(1&t.x))/2:s.r=t.y-(t.x+(1&t.x))/2),s}function f(t,e,i){let s={x:0,y:0};return e===r.v?(s.y=t.r,i===h.C?s.x=t.p+(t.r-(1&t.r))/2:s.x=t.p+(t.r+(1&t.r))/2):(s.x=t.p,i===h.C?s.y=t.r+(t.p-(1&t.p))/2:s.y=t.r+(t.p+(1&t.p))/2),s}function p(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t,...e){if(!e.length)return t;const i=e.shift();if(p(t)&&p(i))for(const e in i)p(t[e])&&p(i[e])?m(t[e],i[e]):Object.assign(t,{[e]:i[e]});return m(t,...e)}class g{*[Symbol.iterator](){for(const t of this.keys)yield[t,this[t]]}get keys(){let t=[];for(const e of Object.keys(this)){let i;if("string"==typeof e){if(!y(e))continue;i=Number(e)}else{if("number"!=typeof e)continue;i=e}t.push(i)}return t.sort(((t,e)=>t-e)),t}get values(){let t=[];for(const e of this.keys)t.push(this[e]);return t}get length(){return this.keys.length}}class $ extends g{}function x(t){let e=new g;if(p(t))for(const i in t)e[Number(i)]=t[i];return e}function y(t){return"string"==typeof t&&!isNaN(Number(t))}function v(t){return t.endsWith("px")?Number(t.slice(0,-2)):Number(t)}function w(t){if("number"==typeof t)return t;if(y(t))return Number(t);if(t.endsWith("px")&&y(t.slice(0,-2)))return Number(t.slice(0,-2));throw new Error(`Invalid calc value: ${t}`)}function _(t){return"number"==typeof t||"string"==typeof t&&(!!y(t)||!(!t.endsWith("px")||!y(t.slice(0,-2))))}function b(t){return t.every(_)}const C=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e+=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" + ")})`},S=function(...t){if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e-=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" - ")})`},z=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e*=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" * ")})`},T=(...t)=>{if(void 0===t[0]||0===t.length)return"0px";if(void 0===t[1]||1===t.length)return`${w(t[0])}px`;if(b(t)){let e=w(t[0]);for(let i=1;i<t.length;i++)e/=w(t[i]);return`${u(e,4)}px`}return`calc(${t.join(" / ")})`},q=(t,e)=>`${u(w(t),e)}px`;class I extends i{set o(t){this.B=t}get o(){return this.B}get i(){return L.grid.h(this.o.i)}get map(){return L.style.map.grid(this.o.i)}set M(t){this.A=t}get M(){return this.A}set N(t){this.P=t}get N(){return this.P}set k(t){this.O=t}get k(){return this.O}constructor(t,e,i){super(),this.o=new O(t,e,L.id()),this.L(i.k),this.M=i.grid}get u(){let t=`.elemap-${this.o.i.map}`,e=t+"-grid";return{l:t,frame:e+"-frame",grid:e,R:e+">div",k:e+">div>div",j:e+"-outer",G:e+"-inner",F:e+"-outer>div",H:e+"-inner>div",Y:e+"-outer>div>div",X:e+"-inner>div>div",Z:e+"-contour",D:t+"-mannequin"}}get spacing(){return z(this.k.N.inner.marginRight,2)}get J(){return this.u.frame+"{display:block;position:absolute;z-index:50;}"+this.u.D+"{display:none;}"+this.u.grid+"{overflow:hidden;}"+this.u.R+"{position:absolute;left:0;right:auto;bottom:auto;pointer-events:none;}"+this.u.k+"{pointer-events:auto;float:left;}"+this.u.j+"{position:absolute;z-index:100;}"+this.u.F+"{z-index:110;}"+this.u.Y+"{position:absolute;z-index:120;}"+this.u.Y+":before{z-index:130;}"+this.u.Y+":after{z-index:140;}"+this.u.G+"{position:relative;z-index:150;}"+this.u.H+"{z-index:160;}"+this.u.X+"{position:absolute;z-index:170;}"+this.u.X+":after{z-index:190;}"+this.u.X+">*{position:relative;z-index:200;}"+this.u.Z+"{display:block;position:absolute;z-index:210;pointer-events:none;}"+this.u.Z+">div{display:block;position:absolute;z-index:220;}"}get K(){return this.u.frame+"{"+this.M.frame+"}"+this.u.Z+">div{"+this.M.Z+"}"}get U(){let t=`{top: ${this.map.N.map.paddingTop};right: ${this.map.N.map.paddingRight};bottom: ${this.map.N.map.paddingBottom};left: ${this.map.N.map.paddingLeft};}`;return this.u.grid+"{"+`margin:${T(this.spacing,2)};`+`width: ${this.V.width};`+`height:${this.V.height};}`+this.u.frame+t+this.u.j+t+this.u.Z+t+this.u.Z+"{"+`margin:${T(this.spacing,2)};}`+this.u.R+"{"+`height:${this.k.size.W.height};`+`width: ${this.tt.width};}`+this.u.Y+"{"+`width:${this.k.size.W.width};`+`height:${this.k.size.W.height};}`+this.u.Z+">div{display:none;top:0;left:0;"+`width:${this.k.size.et.width};`+`height:${this.k.size.et.height};}`+this.u.frame+"{"+`clip-path: path('${this.it}');}`+this.st+this.rt+this.ht}get st(){let t="",e=this.i.nt;for(let i=e.y.min;i<=e.y.max;i++)this.i.ot[i]&&(t+=this.u.R+`[data-elemap-y="${i}"]{`+`top:${z(i-e.y.min,this.k.size.W.height)};}`);return t}compute(){this.N={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.k.compute()}get tt(){return{width:z(this.k.size.W.width,this.i.size.width),height:this.k.size.W.height}}get V(){return{width:this.tt.width,height:z(this.k.size.W.height,this.i.size.height)}}lt(t){return{top:z(t.y-this.i.nt.y.min,this.k.size.W.height),left:z(t.x-this.i.nt.x.min,this.k.size.W.width)}}dt(t){let e=this.lt(t);return{top:C(e.top,T(this.spacing,2)),left:C(e.left,T(this.spacing,2))}}get rt(){let t="";for(let e of this.i.ot.values)for(let i of e.values)t+=this.u.k+i.u.data+"{"+`left:${this.lt(i.ct).left};}`;return t}get ft(){return{top:C(this.map.N.map.paddingTop,T(this.spacing,2)),left:C(this.map.N.map.paddingLeft,T(this.spacing,2))}}gt(){for(let t of this.i.ot.values)for(let e of t.values)e.$t()}}class B{constructor(t){this.map=t}}class E extends B{}class M extends E{constructor(t,e){super(t.map),this.grid=e}}class A extends M{constructor(t,e){super(t,t.grid),this.k=e}}class N extends E{constructor(t,e){super(t.map),this.content=e}}class P{constructor(t,e){this.i=t,this.map=e}}class k extends P{}class O extends k{constructor(t,e,i){super(t,e.map),this.grid=i}}class Q extends O{constructor(t,e,i){super(t,e,i),this.k=i}}class L{static id(){return L.xt++}static add(t){L.yt.set(t.o.map,t)}static content(t){let e=L.map.h(t);if(e)return e.vt(t)}}function R(t,e){if(t&&t.hasOwnProperty(e))return t[e]}function j(t,e,i){if(t)return t[e]=i,t}function G(t,e){for(let i of e)j(t,i[0],i[1]);return t}function F(t){let e={};return j(e,"map",t.map),e}function H(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),e}function Y(t){return{map:R(t,"map"),grid:R(t,"grid")}}function X(t){let e={};return j(e,"map",t.map),j(e,"grid",t.grid),j(e,"tile",t.k),e}function Z(t){return{map:R(t,"map"),grid:R(t,"grid"),k:R(t,"tile")}}function D(t){let e={};return j(e,"map",t.map),j(e,"content",t.content),e}function J(t){return{map:R(t,"map"),content:R(t,"content")}}function K(t){let e={};return t&&(t.content?e=D(t):t.k&&(e=X(t))),e}function U(t){return{W:R(t,"outer"),inner:R(t,"inner")}}function V(t){return G({},[["frame",t.frame],["contour",t.Z]])}function W(t){return{frame:R(t,"frame"),Z:R(t,"contour")}}function tt(t){return G({},[["outer",t.W],["inner",t.inner],["hover",G({},[["outer",t.wt.W],["inner",t.wt.inner]])]])}function et(t){return{W:R(t,"outer"),inner:R(t,"inner"),wt:{W:R(R(t,"hover"),"outer"),inner:R(R(t,"hover"),"inner")}}}function it(t){return{grid:W(R(t,"grid")),k:et(R(t,"tile"))}}function st(t){return{map:U(R(t,"map")),grid:W(R(t,"grid")),k:et(R(t,"tile"))}}function rt(t){return void 0!==R(t,"q")&&void 0!==R(t,"r")?{p:R(e=t,"q"),r:R(e,"r")}:function(t){return{x:R(t,"x"),y:R(t,"y")}}(t);var e}function ht(t){return void 0!==t.p&&void 0!==t.r?function(t){let e={};return j(e,"q",t.p),j(e,"r",t.r),e}(t):function(t){let e={};return j(e,"x",t.x),j(e,"y",t.y),e}(t)}L.xt=0,L.yt=new Map,L.map={h:t=>L.yt.get(t.map),grid:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e}},L.grid={h:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e.grid},_t:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e.grid},bt:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e.grid}},L.k={h:t=>{let e=L.grid.h(t);if(e)return e.Ct(t)}},L.style={map:{grid:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e.style}},grid:t=>{let e=L.map.h(t);if(e&&e instanceof $t)return e.style.grid},k:t=>{let e=L.map.h(t);if(e&&e instanceof $t&&e.style.grid&&e.style.grid instanceof I)return e.style.grid.k}};const nt={W:"padding:50px;background-color:#f5df8d;",inner:""};function ot(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||"")}}const ut={frame:"background-color:#222222;",Z:"border: 2px solid transparent;background-color:#f5f5f5;"};function lt(t,e){return{frame:(e&&e.frame?e.frame:"")+(t.frame||""),Z:(e&&e.Z?e.Z:"")+(t.Z||"")}}const at={W:"background-color:#222222;",inner:"width:100px;height:100px;border-radius:6px;background-color:#b2e090;margin:2px;",wt:{W:"background-color:#f5f5f5;",inner:""}};function dt(t,e){return{W:(e&&e.W?e.W:"")+(t.W||""),inner:(e&&e.inner?e.inner:"")+(t.inner||""),wt:{W:(e&&e.wt&&e.wt.W?e.wt.W:"")+(t.wt&&t.wt.W?t.wt.W:""),inner:(e&&e.wt&&e.wt.inner?e.wt.inner:"")+(t.wt&&t.wt.inner?t.wt.inner:"")}}}class ct{set o(t){this.B=t}get o(){return this.B}get grid(){return L.grid.h(this.o)}set style(t){this.St=t}get style(){return void 0!==this.St?this.St:L.style.k(this.o)}get M(){return this.style.M}set elements(t){this.zt=t}get elements(){return this.zt}set coords(t){this.Tt=t}get coords(){return this.Tt}set qt(t){this.It=t}get qt(){return this.It}constructor(t){this.Bt=!1,this.It={},"number"==typeof t.o.k?this.o=new A(t.o,t.o.k):this.o=new A(t.o,L.id()),this.coords=t.coords,t.M&&"mannequin"!==t.M&&this.Et(t.M)}static Mt(t,e){let i=new t(function(t){return{o:Z(R(t,"ids")),coords:rt(R(t,"coords")),M:!!R(t,"decls")&&et(R(t,"decls")),qt:R(t,"mutations")}}(e));return i.At(e),i}At(t){m(this.qt,t)}Nt(){return this.Pt(this.kt())}kt(t={}){return G(t,[["ids",X(this.o)],["coords",ht(this.coords)],["decls",void 0!==this.St&&tt(this.M)]]),t}Pt(t={}){return G(t,[["mutations",this.qt]]),t}Ot(){return this.qt}Et(t,e=!1){void 0===this.St||e?this.style=this.Qt(dt(t)):this.style=this.Qt(dt(t,this.M)),this.Bt&&this.Lt()}Rt(){this.elements||(this.elements={inner:document.createElement("div")})}Lt(){if(this.style.D&&this.style.i===this)this.jt();else{let t=this.grid.elements.Gt[o(this.ct)],e=this.grid.elements.Ft[o(this.ct)];this.Rt(),this.Ht(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W)),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}this.Bt=!0}jt(){let t=this.grid.elements.D.F,e=this.grid.elements.D.H;this.elements||(this.elements={inner:document.createElement("div"),W:document.createElement("div")}),this.elements.W.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.classList.add("elemap-"+this.o.map+"-mannequin"),t.contains(this.elements.W)||t.appendChild(this.elements.W),e.contains(this.elements.inner)||e.appendChild(this.elements.inner)}$t(){if(void 0!==this.St&&!this.style.D){if(!this.elements.style){let t=document.head.getElementsByTagName("style");for(let e of t)e.classList.contains("elemap-"+this.o.map+"-css-tile-"+this.o.k)&&(this.elements.style=e);this.elements.style||(this.elements.style=document.createElement("style"),this.elements.style.classList.add("elemap-"+this.o.map+"-css-tile-"+this.o.k),document.head.appendChild(this.elements.style))}if(!this.elements.W&&(this.M.W.length||this.M.wt.W.length)){this.elements.W=document.createElement("div");let t=this.grid.elements.Gt[o(this.ct)];this.Ht(),this.elements.W&&(t.contains(this.elements.W)||t.appendChild(this.elements.W))}}this.elements.style&&(this.elements.style.innerHTML=this.style.J+this.style.K+this.style.U)}wt(){let t=L.grid.h(this.o);t&&t.Yt(this.Xt)}Zt(){let t=L.grid.h(this.o);t&&t.Yt(!1)}get Xt(){let t=L.grid.h(this.o);if(t){let e=this.elements.inner,i={x:0,y:0};for(;e;)if(i.x+=e.offsetLeft,i.y+=e.offsetTop,e=e.parentElement,e===t.elements.inner)return{x:i.x-v(t.style.spacing),y:i.y-v(t.style.spacing)}}return{x:0,y:0}}}class ft{set o(t){this.B=t}get o(){return this.B}get map(){return L.map.h(this.o)}set Dt(t){this.Jt=t}get Dt(){return this.Jt}set location(t){this.Kt=t}get location(){return this.Kt}get host(){return this.Kt.content?L.content(this.Kt):this.Kt.k?L.k.h(this.Kt):void 0}set offset(t){this.Ut=t}get offset(){return this.Ut}set elements(t){this.zt=t}get elements(){return this.zt}set qt(t){this.It=t}get qt(){return this.It}constructor(t){if(this.Kt=void 0,this.It={},"number"==typeof t.o.content?this.o=new N(t.o,t.o.content):this.o=new N(t.o,L.id()),"string"==typeof t.Dt){let e=document.createElement("div");e.innerHTML=t.Dt,this.elements={Dt:e.children[0]}}else this.elements={Dt:t.Dt};this.location=t.location,this.offset=t.offset}static Vt(t){let e=new ft(function(t){return{o:J(R(t,"ids")),Dt:R(t,"figure"),location:(e=R(t,"location"),e?R(e,"content")?J(e):R(e,"tile")?Z(e):void 0:void 0),offset:R(t,"offset"),qt:R(t,"mutations")};var e}(t));return e.At(t),e}At(t){m(this.qt,t)}Wt(){return this.Pt(this.kt())}kt(t={}){return G(t,[["ids",D(this.o)],["figure",this.elements.Dt.outerHTML],["location",this.location?K(this.location):void 0],["offset",this.offset]]),t}Pt(t={}){return G(t,[["mutations",this.qt]]),t}Ot(){return this.qt}wt(){this.host&&"function"==typeof this.host.wt&&this.host.wt()}Zt(){this.host&&"function"==typeof this.host.Zt&&this.host.Zt()}Rt(){this.elements.container||(this.elements.container=document.createElement("div"))}Lt(){if(this.Rt(),this.host&&this.host instanceof ct){let t=this.host.style.grid.ft,e=this.host.style.grid.dt(this.host.ct),i=this.host.style.size.inner;this.elements.container.style.top=C(t.top,e.top,this.offset.top,T(i.height,2)),this.elements.container.style.left=C(t.left,e.left,this.offset.top,T(i.width,2))}this.elements.container.contains(this.elements.Dt)||this.elements.container.appendChild(this.elements.Dt),this.map.elements.content.contains(this.elements.container)||this.map.elements.content.appendChild(this.elements.container)}}class pt{constructor(t){this.te=t,this.ee(),this.ie()}At(t){return this.se(t)}ee(){j(this,"mutate",(t=>this.se(t)))}se(t){return this.te.At(t)}Ot(){return this.re()}ie(){j(this,"report",(()=>this.re()))}re(){return this.te.Ot()}}class mt{constructor(t){this.te=t,this.he(),this.ne(),this.ie(),this.ee(),this.oe()}set coords(t){}get coords(){return this.ue()}he(){j(this,"coords",{set:t=>{},get:()=>this.ue()})}ue(){return ht(this.te.coords)}Wt(){return this.le()}ne(){j(this,"export",(()=>this.le()))}le(){return this.te.Wt()}Ot(){return this.re()}ie(){j(this,"report",(()=>this.re()))}re(){return this.te.Ot()}At(t){return this.se(t)}ee(){j(this,"mutate",(t=>this.se(t)))}se(t){return this.te.At(t)}Et(t,e=!1){this.ae(t,e)}oe(){j(this,"updateStyle",((t,e=!1)=>this.ae(t,e)))}ae(t,e=!1){this.te.Et(et(t),e)}}class gt{set o(t){this.B=t}get o(){return this.B}set elements(t){this.zt=t}get elements(){return this.zt}set style(t){this.St=t}get style(){return this.St}get de(){return{l:`elemap-${this.o.map}`,container:`elemap-${this.o.map}-container`,map:`elemap-${this.o.map}-map`}}set qt(t){this.It=t}get qt(){return this.It}set ce(t){this.fe=t}get ce(){return this.fe}constructor(t){this.It={},this.fe=[],t.o&&"number"==typeof t.o.map?this.o=new E(t.o.map):this.o=new E(L.id()),L.add(this),t.ce&&this.pe(t.ce)}Nt(){return this.Pt(this.kt())}kt(t={}){return G(t,[["type",this.me()],["ids",F(this.o)],["contents",this.ce.map((t=>t.Wt()))]]),t}Pt(t={}){return G(t,[["mutations",this.qt]]),t}Ot(){return this.qt}pe(t){for(let e of t)this.ce.push(ft.Vt(e))}Rt(){if(this.elements&&this.elements.map)return this.elements;{let t=document.createElement("div");t.classList.add(`elemap-${this.o.map}-map`);let e=document.createElement("div");return e.classList.add(`elemap-${this.o.map}-content`),{map:t,content:e}}}ge(t){if(t&&this.elements.container!==t&&(this.elements.container=t,this.elements.container.innerHTML="",this.elements.container.classList.add("elemap-"+this.o.map+"-container")),!this.elements.container)throw new Error("No container found.");for(let t of document.getElementsByClassName("elemap-"+this.o.map+"-container"))t!==this.elements.container&&t.classList.remove("elemap-"+this.o.map+"-container");this.elements.container.appendChild(this.elements.map),this.elements.container.appendChild(this.elements.content)}Lt(t){this.elements=this.Rt(),this.ge(t),this.style.Lt();for(let t of this.ce)t.Lt()}vt(t){for(let e of this.ce)if(e.o.content===t.content)return e}$e(t){for(let e of this.ce)if(e.elements.Dt===t)return e}xe(t){let e=function(t){return{Dt:R(t,"figure"),location:R(t,"location"),offset:R(t,"offset")}}(t);e.location instanceof mt?e.location=this.grid.ye(e.location.coords).o:e.location=void 0;let i=new ft(Object.assign(e,{o:this.o,offset:t.offset||{top:"0",right:"0"}}));return this.ce.push(i),new pt(i)}}class $t extends gt{set style(t){this.St=t}get style(){return this.St}get K(){return{map:this.style.M,grid:this.style.grid.M,k:this.style.grid.k.M}}constructor(t,e){super(t),t.grid.o&&"number"==typeof t.grid.o.grid?this.grid=e.Vt(t.grid):this.grid=new e(Object.assign(t.grid,{o:this.o})),this.ve(t.K),t.grid.ot&&this.grid.we(function(t){let e=new $;if(p(t))for(const i in t)e[Number(i)]=x(t[i]);return e}(t.grid.ot))}static Mt(t,e){let i=new t(e);return i.At(e),i}At(t){m(this.qt,t)}kt(t={}){var e,i;return G(t,[["type",this.me()],["ids",F(this.o)],["grid",this.grid.Wt()],["schema",(e=this.K,G({},[["map",(i=e.map,G({},[["outer",i.W],["inner",i.inner]]))],["grid",V(e.grid)],["tile",tt(e.k)]]))],["contents",this.ce.map((t=>t.Wt()))]]),t}Pt(t={}){return G(t,[["mutations",this.qt]]),t}Lt(t){this.elements=this.Rt(),this.ge(t),this.grid.Lt(this.elements.map),this.style.Lt();for(let t of this.ce)t.Lt()}}class xt{set o(t){this.B=t}get o(){return this.B}get size(){return{width:this.nt.x.max-this.nt.x.min+1,height:this.nt.y.max-this.nt.y.min+1}}get nt(){let t,e,i,s;for(let r of this.ot.keys){(void 0===t||r<t)&&(t=r),(void 0===e||r>e)&&(e=r);for(let t of this.ot[r].keys)(void 0===i||t<i)&&(i=t),(void 0===s||t>s)&&(s=t)}return{x:{min:i||0,max:s||0},y:{min:t||0,max:e||0}}}Ct(t){if(this.D.o.k===t.k)return this.D;for(let e in this.ot)for(let i in this.ot[e])if(this.ot[e][i].o.k===t.k)return this.ot[e][i]}get style(){return L.map.grid(this.o).style.grid}get K(){return{grid:this.style.M,k:this.style.k.M}}get de(){let t=`elemap-${this.o.map}`;return{l:t,frame:t+"-frame",grid:t+"-grid",j:t+"-outer",G:t+"-inner",Z:t+"-contour"}}get u(){return this.style.u}set orientation(t){this._e=t}get orientation(){return this._e}set offset(t){this.Ut=t}get offset(){return this.Ut}set elements(t){this.zt=t}get elements(){return this.zt}set qt(t){this.It=t}get qt(){return this.It}constructor(t){this.ot=new $,this.It={},"number"==typeof t.o.grid?this.o=new M(t.o,t.o.grid):this.o=new M(t.o,L.id()),this.orientation=t.orientation,this.offset=t.offset}static Mt(t,e){let i=new t(e);return i.At(e),i}At(t){m(this.qt,t)}Nt(){return this.Pt(this.kt())}kt(t={}){let e=new g;for(let[t,i]of this.ot){e[t]=new g;for(let[s,r]of i)e[t][s]=r.Wt()}var i;return G(t,[["ids",H(this.o)],["orientation",this.orientation],["offset",this.offset],["schema",(i=this.K,G({},[["grid",V(i.grid)],["tile",tt(i.k)]]))],["tiles",e]]),t}Pt(t={}){return G(t,[["mutations",this.qt]]),t}Ot(){return this.qt}we(t){for(let[e,i]of t)for(let[t,s]of i)this.ot[e]||(this.ot[e]=new g),this.ot[e][t]=this.be(s)}Rt(){this.elements||(this.elements={frame:document.createElement("div"),W:document.createElement("div"),inner:document.createElement("div"),Gt:new g,Ft:new g,Z:document.createElement("div"),ut:document.createElement("div"),D:{F:document.createElement("div"),Y:document.createElement("div"),H:document.createElement("div"),X:document.createElement("div")}},this.elements.frame.classList.add("elemap-"+this.o.map+"-grid-frame"),this.elements.W.classList.add("elemap-"+this.o.map+"-grid"),this.elements.W.classList.add("elemap-"+this.o.map+"-grid-outer"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid"),this.elements.inner.classList.add("elemap-"+this.o.map+"-grid-inner"),this.elements.Z.classList.add("elemap-"+this.o.map+"-grid-contour"),this.elements.Z.appendChild(this.elements.ut),this.elements.D.F.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.W.appendChild(this.elements.D.F),this.elements.D.H.classList.add("elemap-"+this.o.map+"-mannequin"),this.elements.inner.appendChild(this.elements.D.H),this.style.k.i.Lt())}Lt(t){this.Rt(),t.innerHTML="";for(let t in this.elements.Gt)for(let e of this.elements.Gt[t].children)this.Ce(e)||this.elements.Gt[t].removeChild(e);for(let t in this.elements.Ft)for(let e of this.elements.Ft[t].children)this.Ce(e)||this.elements.Ft[t].removeChild(e);for(let[t,e]of this.ot){void 0===this.elements.Gt[t]&&(this.elements.Gt[t]=document.createElement("div"),j(this.elements.Gt[t].dataset,"elemapY",t.toString()),this.elements.W.appendChild(this.elements.Gt[t])),void 0===this.elements.Ft[t]&&(this.elements.Ft[t]=document.createElement("div"),j(this.elements.Ft[t].dataset,"elemapY",t.toString()),this.elements.inner.appendChild(this.elements.Ft[t]));for(let t of e.values)t.Lt()}t.appendChild(this.elements.frame),t.appendChild(this.elements.W),t.appendChild(this.elements.inner),t.appendChild(this.elements.Z),this.elements.inner.addEventListener("mouseover",(t=>{let e=t.target.closest(this.u.X);e&&this.Ce(e).wt()})),this.elements.inner.addEventListener("mouseout",(t=>{let e=t.target.closest(this.u.X);e&&this.Ce(e).Zt()}))}Yt(t){!1===t?this.elements.ut.removeAttribute("style"):(this.elements.ut.style.display="block",this.elements.ut.style.transform=`translate(${t.x}px, ${t.y}px)`)}}class yt extends i{set o(t){this.B=t}get o(){return this.B}get i(){return L.k.h(this.o.i)}get grid(){return L.style.grid(this.o.i)}get spacing(){return this.grid.spacing}set N(t){this.P=t}get N(){return this.P||this.compute(),this.P}get u(){return Object.assign(Object.assign({},this.grid.u),{data:this.D?"":this.i.u.data})}set M(t){this.A=t}get M(){return this.A}constructor(t,e,i,s=!1){super(),this.o=new Q(t,e,L.id()),this.D=s,this.M=i}get size(){let t={width:this.N.inner.width,height:this.N.inner.height};return{et:{width:C(t.width,z(this.spacing,2)),height:C(t.height,z(this.spacing,2))},W:{width:C(t.width,this.spacing),height:C(t.height,this.spacing)},inner:t}}get J(){return""}get K(){let t="";return this.M.W.length&&(t+=this.u.Y+this.u.data+"{"+this.M.W+"}"),this.M.inner.length&&(t+=this.u.X+this.u.data+"{"+this.M.inner+"}"),this.M.wt.W.length&&(t+=this.u.Y+this.u.data+":hover{"+this.M.wt.W+"}"),this.M.wt.inner.length&&(t+=this.u.X+this.u.data+":hover{"+this.M.wt.inner+"}"),t}get U(){return""}compute(){this.N={inner:getComputedStyle(this.i.elements.inner)}}get Se(){return this.grid.lt(this.i.ct)}get ze(){return this.grid.dt(this.i.ct)}}class vt extends yt{}class wt extends ct{constructor(t){super(t)}get ct(){return this.coords}static Vt(t){return this.Mt(wt,t)}Wt(){return this.Nt()}set style(t){this.St=t}get style(){return void 0!==this.St?this.St:L.style.k(this.o)}Qt(t){return new vt(this.o,this.grid.style.o,t)}Ht(){this.elements.W&&(j(this.elements.W.dataset,"elemapX",this.coords.x.toString()),j(this.elements.W.dataset,"elemapY",this.coords.y.toString())),j(this.elements.inner.dataset,"elemapX",this.coords.x.toString()),j(this.elements.inner.dataset,"elemapY",this.coords.y.toString())}get u(){return{data:`[data-elemap-x="${this.coords.x}"][data-elemap-y="${this.coords.y}"]`}}}class _t extends xt{constructor(t){super(t)}static Vt(t){return this.Mt(_t,t)}Wt(){return this.Nt()}Te(t){return new wt(t)}be(t){return wt.Vt(t)}qe(t){return t}Ie(t,e){Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.ot[t.y]||(this.ot[t.y]=new g),!e&&this.ot[t.y][t.x]||(this.ot[t.y][t.x]=this.Te({o:this.o,coords:this.qe(t),M:!1}))}Be(t,e,i){Array.isArray(e)&&(e={x:e[0],y:e[1]});for(let s=e.x;s<e.x+t.width;s++)for(let r=e.y;r<e.y+t.height;r++)this.Ie({x:s,y:r},i)}ye(t){if(Array.isArray(t)&&(t={x:t[0],y:t[1]}),this.ot[t.y]&&this.ot[t.y][t.x])return this.ot[t.y][t.x]}Ce(t){if(t.hasAttribute("data-elemap-x")&&t.hasAttribute("data-elemap-y")){let e=this.ye({x:Number(t.getAttribute("data-elemap-x")),y:Number(t.getAttribute("data-elemap-y"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}}class bt extends i{set o(t){this.B=t}get o(){return this.B}set M(t){this.A=t}get M(){return this.A}set elements(t){this.zt=t}get elements(){return this.zt}set N(t){this.P=t}get N(){return this.P}constructor(t,e){super(),this.o=new k(t,L.id()),this.M=e.map}Wt(){return G(this.M,[["outer",this.M.W],["inner",this.M.inner]])}Rt(){let t,e,i,s=document.head.getElementsByTagName("style");for(let r of s)r.classList.contains(this.i.de.l+"-css-core")?t=r:r.classList.contains(this.i.de.l+"-css-schema")?e=r:r.classList.contains(this.i.de.l+"-css-generated")&&(i=r);return t||(t=document.createElement("style"),t.classList.add(this.i.de.l+"-css-core"),document.head.appendChild(t)),e||(e=document.createElement("style"),e.classList.add(this.i.de.l+"-css-schema"),document.head.appendChild(e)),i||(i=document.createElement("style"),i.classList.add(this.i.de.l+"-css-generated"),document.head.appendChild(i)),{J:t,K:e,U:i}}Lt(){this.elements=this.Rt(),this.elements.J.innerHTML=this.J,this.elements.K.innerHTML=this.K,this.i.elements.map.offsetHeight,this.compute(),this.elements.U.innerHTML=this.U}get u(){return{l:`.elemap-${this.o.i.map}`,container:`.elemap-${this.o.i.map}-container`,map:`.elemap-${this.o.i.map}-map`,content:`.elemap-${this.o.i.map}-content`}}get J(){return this.u.container+"{width:max-content;position:relative;}"+this.u.map+"{position:relative;width:max-content;z-index:10;display: flex;}"+this.u.content+"{position:absolute;z-index:500;top:0;left:0;bottom:0;right:0;pointer-events:none;}"+this.u.content+">div{width: 0px;height: 0px;position: absolute;overflow:visible}"+this.u.content+">div>*{position: absolute;transform: translate(-50%, -100%);}"}get K(){return this.u.map+"{"+this.M.W+"}"+this.u.map+">*{"+this.M.inner+"}"}compute(){this.N={map:getComputedStyle(this.i.elements.map)}}get U(){return""}}class Ct extends bt{set grid(t){this.Ee=t}get grid(){return this.Ee}get i(){return L.map.grid(this.o.i)}constructor(t,e){super(t,e),this.Me(e)}Lt(){this.elements=this.Rt(),this.elements.J.innerHTML=this.J+this.grid.J+this.grid.k.J,this.elements.K.innerHTML=this.K+this.grid.K+this.grid.k.K,this.i.elements.map.offsetHeight,this.i.grid.elements.inner.offsetHeight,this.compute(),this.elements.U.innerHTML=this.U+this.grid.U+this.grid.k.U,this.grid.gt();let t=document.head.getElementsByTagName("style"),e=Array.from(t);for(let t of e)for(let e of t.classList)if(e.startsWith(this.i.de.l+"-css-")){let e=!1;if(t!==this.elements.J&&t!==this.elements.K&&t!==this.elements.U||(e=!0),!e)for(let i of this.grid.i.ot.values){for(let s of i.values)if(t===s.elements.style){e=!0;break}if(e)break}e||t.remove()}}compute(){this.N={map:getComputedStyle(this.i.elements.map)},this.grid.compute()}}class St extends I{get i(){return L.grid._t(this.o.i)}set k(t){this.O=t}get k(){return this.O}L(t){this.i.D=new wt({o:this.i.o,coords:{x:0,y:0},M:"mannequin"}),this.k=new vt(this.i.D.o,this.o,t,!0)}get ht(){let t=u(v(this.N.ut.borderWidth),0)+"px",e={width:S(this.k.size.et.width,z(t,2)),height:S(this.k.size.et.height,z(t,2))},i=d(this.k.size.et,v(this.k.N.inner.borderRadius)),s=d(e,v(this.k.N.inner.borderRadius),{top:v(t),left:v(t)});return this.u.Z+">div{"+`clip-path:path(evenodd,'${i} ${s}');}`}get it(){let t="",e=this.i.nt;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.ot[i]||!this.i.ot[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=d(this.k.size.et,v(this.k.N.inner.borderRadius),{top:v(e.top),left:v(e.left)})}return t}}class zt extends Ct{Me(t){this.grid=new St(this.i.grid.o,this.o,t)}}class Tt extends $t{constructor(t){super(t,_t)}static Vt(t){return this.Mt(Tt,t)}Wt(){return this.Nt()}me(){return`${s.m}`}ve(t){this.style=new zt(this.o,t)}}class qt extends yt{}class It extends ct{constructor(t){super(t)}get ct(){let t=f(this.coords,this.grid.orientation,this.grid.offset);return{x:t.x,y:t.y}}static Vt(t){return this.Mt(It,t)}Wt(){return this.Nt()}set style(t){this.St=t}get style(){return void 0!==this.St?this.St:L.style.k(this.o)}Qt(t){return new qt(this.o,this.grid.style.o,t)}Ht(){this.elements.W&&(j(this.elements.W.dataset,"elemapR",this.coords.r.toString()),j(this.elements.W.dataset,"elemapQ",this.coords.p.toString())),j(this.elements.inner.dataset,"elemapR",this.coords.r.toString()),j(this.elements.inner.dataset,"elemapQ",this.coords.p.toString()),this.elements.W&&(j(this.elements.W.dataset,"elemapX",this.ct.x.toString()),j(this.elements.W.dataset,"elemapY",this.ct.y.toString())),j(this.elements.inner.dataset,"elemapX",this.ct.x.toString()),j(this.elements.inner.dataset,"elemapY",this.ct.y.toString())}get u(){return{data:`[data-elemap-r="${this.coords.r}"][data-elemap-q="${this.coords.p}"]`}}}class Bt extends xt{constructor(t){super(t)}static Vt(t){return this.Mt(Bt,t)}Wt(){return this.Nt()}Te(t){return new It(t)}be(t){return It.Vt(t)}qe(t){return c(t,this.orientation,this.offset)}ye(t){Array.isArray(t)&&(t={p:t[0],r:t[1]});let e=n(t)?t:f(t,this.orientation,this.offset);if(this.ot[e.y]&&this.ot[e.y][e.x])return this.ot[e.y][e.x]}Ce(t){if(t.hasAttribute("data-elemap-r")&&t.hasAttribute("data-elemap-q")){let e=this.ye({p:Number(t.getAttribute("data-elemap-q")),r:Number(t.getAttribute("data-elemap-r"))});if(e&&e.elements&&(e.elements.inner&&e.elements.inner===t||e.elements.W&&e.elements.W===t))return e}}Ie(t,e){Array.isArray(t)&&(t={p:t[0],r:t[1]});let i=n(t)?t:f(t,this.orientation,this.offset);this.ot[i.y]||(this.ot[i.y]=new g),!e&&this.ot[i.y][i.x]||(this.ot[i.y][i.x]=this.Te({o:this.o,coords:this.qe(i),M:!1}))}Be(t,e,i){if(Array.isArray(e)&&(e={p:e[0],r:e[1]}),n(e))for(let s=e.x;s<e.x+t.width;s++)for(let r=e.y;r<e.y+t.height;r++)this.Ie(c({x:s,y:r},this.orientation,this.offset),i);else for(let s=e.p;s<e.p+t.width;s++)for(let r=e.r;r<e.r+t.height;r++)this.Ie({p:s,r},i)}Ae(t){return this.offset===h.C?t%2!=0:t%2==0}}class Et extends I{get i(){return L.grid.bt(this.o.i)}set k(t){this.O=t}get k(){return this.O}L(t){this.i.D=new It({o:this.i.o,coords:{p:0,r:0},M:"mannequin"}),this.k=new qt(this.i.D.o,this.o,t,!0)}get Ne(){return this.i.orientation===r.v?{et:{T:T(this.k.size.et.height,2),I:this.k.size.et.height,q:this.k.size.et.width},W:{T:T(this.k.size.W.height,2),I:this.k.size.W.height,q:this.k.size.W.width},inner:{T:T(this.k.size.inner.height,2),I:this.k.size.inner.height,q:this.k.size.inner.width}}:{et:{T:T(this.k.size.et.width,2),I:this.k.size.et.width,q:this.k.size.et.height},W:{T:T(this.k.size.W.width,2),I:this.k.size.W.width,q:this.k.size.W.height},inner:{T:T(this.k.size.inner.width,2),I:this.k.size.inner.width,q:this.k.size.inner.height}}}compute(){this.N={W:getComputedStyle(this.i.elements.W),inner:getComputedStyle(this.i.elements.inner),ut:getComputedStyle(this.i.elements.ut)},this.k.compute(),this.Pe(),this.k.compute()}Pe(){let t,e;this.i.orientation===r.v?(e=S(this.k.size.W.height,this.k.size.inner.height),t=q(z(this.k.size.inner.width,l),0),this.map.elements.K.innerHTML+=this.u.Y+"{height:"+C(t,e)+"}"+this.u.X+"{height:"+t+"}"):(e=S(this.k.size.W.width,this.k.size.inner.width),t=q(z(this.k.size.inner.height,l),0),this.map.elements.K.innerHTML+=this.u.Y+"{width:"+C(t,e)+"}"+this.u.X+"{width:"+t+"}")}get it(){let t="",e=this.i.nt;for(let i=e.y.min;i<=e.y.max;i++)for(let s=e.x.min;s<=e.x.max;s++){if(!this.i.ot[i]||!this.i.ot[i][s])continue;""!==t&&(t+=" ");let e=this.lt({x:s,y:i});t+=a(this.i.orientation,this.Ne.et,v(this.k.N.inner.borderRadius),{top:v(e.top),left:v(e.left)})}return t}get ht(){let t=u(v(this.N.ut.borderWidth),0)+"px",e=S(this.Ne.et.I,z(t,2)),i={T:T(e,2),I:e,q:S(this.Ne.et.q,z(t,2))},s=a(this.i.orientation,this.Ne.et,v(this.k.N.inner.borderRadius)),r=a(this.i.orientation,i,v(this.k.N.inner.borderRadius),{top:v(t),left:v(t)});return this.u.X+"{"+`clip-path:path('${a(this.i.orientation,this.Ne.inner,v(this.k.N.inner.borderRadius))}');}`+this.u.Y+"{"+`clip-path:path('${a(this.i.orientation,this.Ne.W,0)}');}`+this.u.Z+">div{"+`clip-path:path(evenodd,'${s} ${r}');}`+this.ke()}get Oe(){return this.i.orientation===r.v?{vertical:T(this.k.size.W.height,4),Qe:"0px"}:{vertical:"0px",Qe:T(this.k.size.W.width,4)}}Le(){let t=!1,e=!1;for(let i of this.i.ot.values){for(let s of i.values)this.Re(s.ct)?t=!0:e=!0;if(t&&e)break}return t&&e}je(){let t=this.i.nt;for(let e of this.i.ot.values)for(let i of e.values)if(!this.Re(i.ct)){if(this.i.orientation===r.v&&i.ct.x===t.x.min)return!0;if(this.i.orientation===r._&&i.ct.y===t.y.min)return!0}return!1}Ge(){let t=this.i.nt;for(let e of this.i.ot.values)for(let i of e.values)if(this.Re(i.ct)){if(this.i.orientation===r.v&&i.ct.x===t.x.max)return!0;if(this.i.orientation===r._&&i.ct.y===t.y.max)return!0}return!1}Re(t){return this.i.orientation===r.v?"even"===this.i.offset&&t.y%2==0||"odd"===this.i.offset&&t.y%2!=0:"even"===this.i.offset&&t.x%2==0||"odd"===this.i.offset&&t.x%2!=0}Fe(t){let e={vertical:"0px",Qe:"0px"};return this.Le()?(this.i.orientation===r.v?this.je()?this.Re(t)&&(e.Qe=this.He.Qe):this.Re(t)||(e.Qe=S(0,this.He.Qe)):this.je()?this.Re(t)&&(e.vertical=this.He.vertical):this.Re(t)||(e.vertical=S(0,this.He.vertical)),e):e}ke(){let t="";if(!this.Le())return t;let e=this.i.nt;if(this.i.orientation===r.v)for(let i=e.y.min;i<=e.y.max;i++)t+=this.u.R+`[data-elemap-y="${i}"]{`+`left:${this.Fe({x:e.x.min,y:i}).Qe};}`;else for(let i=e.x.min;i<=e.x.max;i++)t+=this.u.k+`[data-elemap-x="${i}"]{`+`top:${this.Fe({x:i,y:e.y.min}).vertical};}`;return t}get He(){return this.i.orientation===r.v?{vertical:"0px",Qe:T(this.k.size.W.width,2)}:{vertical:T(this.k.size.W.height,2),Qe:"0px"}}get st(){let t="",e=this.i.nt;for(let i=e.y.min;i<=e.y.max;i++)this.i.ot[i]&&(t+=this.u.R+`[data-elemap-y="${i}"]{`+`top:${S(z(i-e.y.min,this.k.size.W.height),z(this.Oe.vertical,i-e.y.min))};}`);return t}get tt(){return{width:S(z(this.k.size.W.width,this.i.size.width),z(this.Oe.Qe,this.i.size.width-1)),height:this.k.size.W.height}}get V(){let t=this.tt.width;this.i.orientation===r.v&&this.Le()&&(this.je()&&this.Ge()?t=C(t,this.He.Qe):this.je()||this.Ge()||(t=S(t,this.He.Qe)));let e=S(z(this.k.size.W.height,this.i.size.height),z(this.Oe.vertical,this.i.size.height-1));return this.i.orientation===r._&&this.Le()&&(this.je()&&this.Ge()?e=C(e,this.He.vertical):this.je()||this.Ge()||(e=S(e,this.He.vertical))),{width:t,height:e}}lt(t){let e=t.x-this.i.nt.x.min,i=t.y-this.i.nt.y.min,s=S(this.k.size.W.height,this.Oe.vertical),r=S(this.k.size.W.width,this.Oe.Qe);return{top:C(z(i,s),this.Fe(t).vertical),left:C(z(e,r),this.Fe(t).Qe)}}dt(t){let e=this.lt(t);return{top:C(e.top,T(this.spacing,2)),left:C(e.left,T(this.spacing,2))}}get rt(){let t="";for(let e of this.i.ot.values)for(let i of e.values)t+=this.u.k+i.u.data+"{"+`left:${S(this.lt(i.ct).left,this.Fe(i.ct).Qe)};}`;return t}}class Mt extends Ct{Me(t){this.grid=new Et(this.i.grid.o,this.o,t)}}class At extends $t{constructor(t){super(t,Bt)}static Vt(t){return this.Mt(At,t)}Wt(){return this.Nt()}me(){return`${s.$}`}ve(t){this.style=new Mt(this.o,t)}}function Nt(t){let e=R(t,"grid");return{o:(s=R(t,"ids"),{map:R(s,"map")}),grid:{o:Y(R(e,"ids")),orientation:R(e,"orientation")||r.v,offset:R(e,"offset")||h.C,K:it(R(e,"schema")),ot:R(e,"tiles")},K:(i=st(R(t,"schema"))||{},{map:ot(i.map||{},nt),grid:lt(i.grid||{},ut),k:dt(i.k||{},at)}),ce:R(t,"contents")||[]};var i,s}class Pt{constructor(t){this.te=t,this.ne(),this.ie(),this.ee(),this.Ye(),this.Xe(),this.Ze()}Wt(){return this.le()}ne(){j(this,"export",(()=>this.le()))}le(){return this.te.Wt()}Ot(){return this.re()}ie(){j(this,"report",(()=>this.re()))}re(){return this.te.Ot()}At(t){return this.se(t)}ee(){j(this,"mutate",(t=>this.se(t)))}se(t){return this.te.At(t)}ye(t){return this.De(t)}Ye(){j(this,"tileByCoords",(t=>this.De(t)))}De(t){let e=this.te.ye(Array.isArray(t)?t:rt(t));if(e)return new mt(e)}Ie(t,e=!1){return this.Je(t)}Xe(){j(this,"createTile",((t,e=!1)=>this.Je(t,e)))}Je(t,e=!1){return this.te.Ie(t,e)}Be(t,e=[0,0],i=!1){return this.Ke(t,e,i)}Ze(){j(this,"createTiles",((t,e=[0,0],i=!1)=>this.Ke(t,e,i)))}Ke(t,e,i=!1){return this.te.Be(t,e,i)}}class kt{constructor(t,e){let i=t===s.m?s.m:t===s.$?s.$:s.m;i===s.m?this.te=new Tt(Nt(e||{})):i===s.$&&(this.te=new At(Nt(e||{}))),this.ne(),this.ie(),this.Ue(),this.ee(),this.Ve(),this.We(),this.ti(),this.ei()}static Vt(t){return Ot(t)}Wt(){return this.le()}ne(){j(this,"export",(()=>this.le()))}le(){return this.te.Wt()}Ot(){return this.re()}ie(){j(this,"report",(()=>this.re()))}re(){return this.te.Ot()}At(t){return this.se(t)}ee(){j(this,"mutate",(t=>this.se(t)))}se(t){return this.te.At(t)}Lt(t){this.ii(t)}Ue(){j(this,"render",(t=>this.ii(t)))}ii(t){this.te.Lt(t)}set grid(t){}get grid(){return this.si()}Ve(){j(this,"grid",{set:t=>{},get:()=>this.si()})}si(){let t=this.te.grid;if(t)return new Pt(t)}xe(t){return this.ri(t)}We(){j(this,"addContent",(t=>this.ri(t)))}ri(t){return this.te.xe(t)}vt(t){return this.hi(t)}ti(){j(this,"contentById",(t=>this.hi(t)))}hi(t){let e=this.te.vt(t);if(e)return new pt(e)}$e(t){return this.ni(t)}ei(){j(this,"contentByElement",(t=>this.ni(t)))}ni(t){let e=this.te.$e(t);if(e)return new pt(e)}static get oi(){return{m:s.m,$:s.$}}static get ui(){return{v:r.v,_:r._}}static get li(){return{C:h.C,S:h.S}}}function Ot(t){return new kt(t.type,t)}j(kt,"import",Ot);const Qt=kt})(),Elemap=e.default})();